<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/build.gradle.kts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/build.gradle.kts" />
              <option name="originalContent" value="plugins {&#10;    alias(libs.plugins.android.application)&#10;    alias(libs.plugins.kotlin.android)&#10;    alias(libs.plugins.kotlin.compose)&#10;}&#10;&#10;android {&#10;    namespace = &quot;com.example.pamproject&quot;&#10;    compileSdk = 36&#10;&#10;    defaultConfig {&#10;        applicationId = &quot;com.example.pamproject&quot;&#10;        minSdk = 24&#10;        targetSdk = 36&#10;        versionCode = 1&#10;        versionName = &quot;1.0&quot;&#10;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#10;    }&#10;&#10;    buildTypes {&#10;        release {&#10;            isMinifyEnabled = false&#10;            proguardFiles(&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#10;                &quot;proguard-rules.pro&quot;&#10;            )&#10;        }&#10;    }&#10;    compileOptions {&#10;        sourceCompatibility = JavaVersion.VERSION_11&#10;        targetCompatibility = JavaVersion.VERSION_11&#10;        isCoreLibraryDesugaringEnabled = true&#10;    }&#10;    kotlinOptions {&#10;        jvmTarget = &quot;11&quot;&#10;    }&#10;    buildFeatures {&#10;        compose = true&#10;    }&#10;}&#10;&#10;dependencies {&#10;&#10;    implementation(libs.androidx.core.ktx)&#10;    implementation(libs.androidx.foundation)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.navigation.compose)&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;    implementation(&quot;io.coil-kt:coil-compose:2.7.0&quot;)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0&quot;)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-runtime-compose:2.7.0&quot;)&#10;}" />
              <option name="updatedContent" value="plugins {&#13;&#10;    alias(libs.plugins.android.application)&#13;&#10;    alias(libs.plugins.kotlin.android)&#13;&#10;    alias(libs.plugins.kotlin.compose)&#13;&#10;}&#13;&#10;&#13;&#10;android {&#13;&#10;    namespace = &quot;com.example.pamproject&quot;&#13;&#10;    compileSdk = 36&#13;&#10;&#13;&#10;    defaultConfig {&#13;&#10;        applicationId = &quot;com.example.pamproject&quot;&#13;&#10;        minSdk = 24&#13;&#10;        targetSdk = 36&#13;&#10;        versionCode = 1&#13;&#10;        versionName = &quot;1.0&quot;&#13;&#10;&#13;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#13;&#10;    }&#13;&#10;&#13;&#10;    buildTypes {&#13;&#10;        release {&#13;&#10;            isMinifyEnabled = false&#13;&#10;            proguardFiles(&#13;&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#13;&#10;                &quot;proguard-rules.pro&quot;&#13;&#10;            )&#13;&#10;        }&#13;&#10;    }&#13;&#10;    compileOptions {&#13;&#10;        sourceCompatibility = JavaVersion.VERSION_11&#13;&#10;        targetCompatibility = JavaVersion.VERSION_11&#13;&#10;        isCoreLibraryDesugaringEnabled = true&#13;&#10;    }&#13;&#10;    kotlinOptions {&#13;&#10;        jvmTarget = &quot;11&quot;&#13;&#10;    }&#13;&#10;    buildFeatures {&#13;&#10;        compose = true&#13;&#10;    }&#13;&#10;}&#13;&#10;&#13;&#10;dependencies {&#10;&#10;    implementation(libs.androidx.core.ktx)&#10;    implementation(libs.androidx.foundation)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.navigation.compose)&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;    implementation(&quot;io.coil-kt:coil-compose:2.7.0&quot;)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0&quot;)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-runtime-compose:2.7.0&quot;)&#10;&#10;    // Retrofit for REST API&#10;    implementation(&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;)&#10;    implementation(&quot;com.squareup.retrofit2:converter-gson:2.9.0&quot;)&#10;&#10;    // GSON for JSON parsing&#10;    implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)&#10;&#10;    // Volley for HTTP requests&#10;    implementation(&quot;com.android.volley:volley:1.2.1&quot;)&#10;&#10;    // OkHttp for HTTP client (used with Retrofit)&#10;    implementation(&quot;com.squareup.okhttp3:okhttp:4.12.0&quot;)&#10;    implementation(&quot;com.squareup.okhttp3:logging-interceptor:4.12.0&quot;)&#10;&#10;    // Coroutines&#10;    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3&quot;)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/AndroidManifest.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/AndroidManifest.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.PAMProject&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.MainActivity&quot;&#10;            android:exported=&quot;true&quot;&#10;            android:label=&quot;@string/app_name&quot;&#10;            android:theme=&quot;@style/Theme.PAMProject&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;&#10;        &lt;provider&#10;            android:name=&quot;androidx.core.content.FileProvider&quot;&#10;            android:authorities=&quot;${applicationId}.fileprovider&quot;&#10;            android:exported=&quot;false&quot;&#10;            android:grantUriPermissions=&quot;true&quot;&gt;&#10;            &lt;meta-data&#10;                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;&#10;                android:resource=&quot;@xml/file_paths&quot; /&gt;&#10;        &lt;/provider&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;&#10;&#10;    &lt;application&#13;&#10;        android:allowBackup=&quot;true&quot;&#13;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#13;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#13;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#13;&#10;        android:label=&quot;@string/app_name&quot;&#13;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#13;&#10;        android:supportsRtl=&quot;true&quot;&#13;&#10;        android:theme=&quot;@style/Theme.PAMProject&quot;&gt;&#13;&#10;        &lt;activity&#13;&#10;            android:name=&quot;.MainActivity&quot;&#13;&#10;            android:exported=&quot;true&quot;&#13;&#10;            android:label=&quot;@string/app_name&quot;&#13;&#10;            android:theme=&quot;@style/Theme.PAMProject&quot;&gt;&#13;&#10;            &lt;intent-filter&gt;&#13;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#13;&#10;&#13;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#13;&#10;            &lt;/intent-filter&gt;&#13;&#10;        &lt;/activity&gt;&#13;&#10;&#13;&#10;        &lt;provider&#13;&#10;            android:name=&quot;androidx.core.content.FileProvider&quot;&#13;&#10;            android:authorities=&quot;${applicationId}.fileprovider&quot;&#13;&#10;            android:exported=&quot;false&quot;&#13;&#10;            android:grantUriPermissions=&quot;true&quot;&gt;&#13;&#10;            &lt;meta-data&#13;&#10;                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;&#13;&#10;                android:resource=&quot;@xml/file_paths&quot; /&gt;&#13;&#10;        &lt;/provider&gt;&#13;&#10;    &lt;/application&gt;&#13;&#10;&#13;&#10;&lt;/manifest&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/ApiConfig.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/ApiConfig.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;/**&#10; * Configuration object for Supabase API&#10; */&#10;object ApiConfig {&#10;    const val SUPABASE_URL = &quot;https://ctzndtrcxiqjalyqwkqj.supabase.co&quot;&#10;    const val SUPABASE_KEY = &quot;sb_publishable_BKrLoFXim8ILj1sJqjOcIA_oK9itaQK&quot;&#10;    const val TABLE_WORKOUT_LOGS = &quot;workout_logs&quot;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/ApiService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/ApiService.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;import retrofit2.Response&#10;import retrofit2.http.*&#10;&#10;/**&#10; * Retrofit API Service interface for Supabase REST API&#10; * Uses Representational State Transfer (REST) architecture&#10; */&#10;interface ApiService {&#10;&#10;    /**&#10;     * GET all workout logs from Supabase&#10;     * Uses thread/coroutine for async communication&#10;     */&#10;    @GET(&quot;rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;)&#10;    suspend fun getAllWorkoutLogs(&#10;        @Header(&quot;apikey&quot;) apiKey: String = ApiConfig.SUPABASE_KEY,&#10;        @Header(&quot;Authorization&quot;) authorization: String = &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;        @Query(&quot;select&quot;) select: String = &quot;*&quot;,&#10;        @Query(&quot;order&quot;) order: String = &quot;timestamp.desc&quot;&#10;    ): Response&lt;List&lt;WorkoutLogDto&gt;&gt;&#10;&#10;    /**&#10;     * POST a new workout log to Supabase&#10;     * Uses thread/coroutine for async communication&#10;     */&#10;    @POST(&quot;rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;)&#10;    suspend fun createWorkoutLog(&#10;        @Header(&quot;apikey&quot;) apiKey: String = ApiConfig.SUPABASE_KEY,&#10;        @Header(&quot;Authorization&quot;) authorization: String = &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;        @Header(&quot;Content-Type&quot;) contentType: String = &quot;application/json&quot;,&#10;        @Header(&quot;Prefer&quot;) prefer: String = &quot;return=representation&quot;,&#10;        @Body workoutLog: CreateWorkoutLogRequest&#10;    ): Response&lt;List&lt;WorkoutLogDto&gt;&gt;&#10;&#10;    /**&#10;     * DELETE a workout log from Supabase by timestamp&#10;     * Uses thread/coroutine for async communication&#10;     */&#10;    @DELETE(&quot;rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;)&#10;    suspend fun deleteWorkoutLog(&#10;        @Header(&quot;apikey&quot;) apiKey: String = ApiConfig.SUPABASE_KEY,&#10;        @Header(&quot;Authorization&quot;) authorization: String = &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;        @Query(&quot;timestamp&quot;) timestamp: String&#10;    ): Response&lt;Unit&gt;&#10;&#10;    /**&#10;     * DELETE all workout logs from Supabase&#10;     * Uses thread/coroutine for async communication&#10;     */&#10;    @DELETE(&quot;rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;)&#10;    suspend fun deleteAllWorkoutLogs(&#10;        @Header(&quot;apikey&quot;) apiKey: String = ApiConfig.SUPABASE_KEY,&#10;        @Header(&quot;Authorization&quot;) authorization: String = &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;        @Query(&quot;id&quot;) idFilter: String = &quot;neq.null&quot;  // This deletes all rows where id is not null&#10;    ): Response&lt;Unit&gt;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/HttpUrlConnectionClient.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/HttpUrlConnectionClient.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;import com.google.gson.Gson&#10;import com.google.gson.reflect.TypeToken&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import java.io.BufferedReader&#10;import java.io.InputStreamReader&#10;import java.io.OutputStreamWriter&#10;import java.net.HttpURLConnection&#10;import java.net.URL&#10;&#10;/**&#10; * HTTP client using HttpURLConnection for REST API communication&#10; * Demonstrates thread-based network communication using coroutines&#10; */&#10;class HttpUrlConnectionClient {&#10;&#10;    private val gson = Gson()&#10;&#10;    /**&#10;     * GET all workout logs using HttpURLConnection&#10;     * Runs on IO thread/dispatcher for network operations&#10;     */&#10;    suspend fun getAllWorkoutLogs(): Result&lt;List&lt;WorkoutLogDto&gt;&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val url = URL(&quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?select=*&amp;order=timestamp.desc&quot;)&#10;            val connection = url.openConnection() as HttpURLConnection&#10;&#10;            connection.apply {&#10;                requestMethod = &quot;GET&quot;&#10;                setRequestProperty(&quot;apikey&quot;, ApiConfig.SUPABASE_KEY)&#10;                setRequestProperty(&quot;Authorization&quot;, &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;)&#10;                setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;)&#10;                connectTimeout = 30000&#10;                readTimeout = 30000&#10;            }&#10;&#10;            val responseCode = connection.responseCode&#10;            if (responseCode == HttpURLConnection.HTTP_OK) {&#10;                val reader = BufferedReader(InputStreamReader(connection.inputStream))&#10;                val response = reader.readText()&#10;                reader.close()&#10;&#10;                val type = object : TypeToken&lt;List&lt;WorkoutLogDto&gt;&gt;() {}.type&#10;                val logs: List&lt;WorkoutLogDto&gt; = gson.fromJson(response, type)&#10;                Result.success(logs)&#10;            } else {&#10;                Result.failure(Exception(&quot;HTTP Error: $responseCode&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Result.failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * POST a new workout log using HttpURLConnection&#10;     * Runs on IO thread/dispatcher for network operations&#10;     */&#10;    suspend fun createWorkoutLog(request: CreateWorkoutLogRequest): Result&lt;WorkoutLogDto&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val url = URL(&quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;)&#10;            val connection = url.openConnection() as HttpURLConnection&#10;&#10;            connection.apply {&#10;                requestMethod = &quot;POST&quot;&#10;                doOutput = true&#10;                setRequestProperty(&quot;apikey&quot;, ApiConfig.SUPABASE_KEY)&#10;                setRequestProperty(&quot;Authorization&quot;, &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;)&#10;                setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;)&#10;                setRequestProperty(&quot;Prefer&quot;, &quot;return=representation&quot;)&#10;                connectTimeout = 30000&#10;                readTimeout = 30000&#10;            }&#10;&#10;            val jsonBody = gson.toJson(request)&#10;            val writer = OutputStreamWriter(connection.outputStream)&#10;            writer.write(jsonBody)&#10;            writer.flush()&#10;            writer.close()&#10;&#10;            val responseCode = connection.responseCode&#10;            if (responseCode == HttpURLConnection.HTTP_CREATED || responseCode == HttpURLConnection.HTTP_OK) {&#10;                val reader = BufferedReader(InputStreamReader(connection.inputStream))&#10;                val response = reader.readText()&#10;                reader.close()&#10;&#10;                val type = object : TypeToken&lt;List&lt;WorkoutLogDto&gt;&gt;() {}.type&#10;                val logs: List&lt;WorkoutLogDto&gt; = gson.fromJson(response, type)&#10;                if (logs.isNotEmpty()) {&#10;                    Result.success(logs.first())&#10;                } else {&#10;                    Result.failure(Exception(&quot;Empty response&quot;))&#10;                }&#10;            } else {&#10;                val errorReader = BufferedReader(InputStreamReader(connection.errorStream))&#10;                val errorResponse = errorReader.readText()&#10;                errorReader.close()&#10;                Result.failure(Exception(&quot;HTTP Error: $responseCode - $errorResponse&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Result.failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * DELETE a workout log by timestamp using HttpURLConnection&#10;     * Runs on IO thread/dispatcher for network operations&#10;     */&#10;    suspend fun deleteWorkoutLog(timestamp: Long): Result&lt;Unit&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val url = URL(&quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?timestamp=eq.$timestamp&quot;)&#10;            val connection = url.openConnection() as HttpURLConnection&#10;&#10;            connection.apply {&#10;                requestMethod = &quot;DELETE&quot;&#10;                setRequestProperty(&quot;apikey&quot;, ApiConfig.SUPABASE_KEY)&#10;                setRequestProperty(&quot;Authorization&quot;, &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;)&#10;                connectTimeout = 30000&#10;                readTimeout = 30000&#10;            }&#10;&#10;            val responseCode = connection.responseCode&#10;            if (responseCode == HttpURLConnection.HTTP_NO_CONTENT || responseCode == HttpURLConnection.HTTP_OK) {&#10;                Result.success(Unit)&#10;            } else {&#10;                Result.failure(Exception(&quot;HTTP Error: $responseCode&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Result.failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * DELETE all workout logs using HttpURLConnection&#10;     * Runs on IO thread/dispatcher for network operations&#10;     */&#10;    suspend fun deleteAllWorkoutLogs(): Result&lt;Unit&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val url = URL(&quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?id=neq.null&quot;)&#10;            val connection = url.openConnection() as HttpURLConnection&#10;&#10;            connection.apply {&#10;                requestMethod = &quot;DELETE&quot;&#10;                setRequestProperty(&quot;apikey&quot;, ApiConfig.SUPABASE_KEY)&#10;                setRequestProperty(&quot;Authorization&quot;, &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;)&#10;                connectTimeout = 30000&#10;                readTimeout = 30000&#10;            }&#10;&#10;            val responseCode = connection.responseCode&#10;            if (responseCode == HttpURLConnection.HTTP_NO_CONTENT || responseCode == HttpURLConnection.HTTP_OK) {&#10;                Result.success(Unit)&#10;            } else {&#10;                Result.failure(Exception(&quot;HTTP Error: $responseCode&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Result.failure(e)&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/RetrofitClient.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/RetrofitClient.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;import com.google.gson.GsonBuilder&#10;import okhttp3.OkHttpClient&#10;import okhttp3.logging.HttpLoggingInterceptor&#10;import retrofit2.Retrofit&#10;import retrofit2.converter.gson.GsonConverterFactory&#10;import java.util.concurrent.TimeUnit&#10;&#10;/**&#10; * Retrofit Client singleton for API communication&#10; * Implements REST architecture with proper thread handling&#10; */&#10;object RetrofitClient {&#10;&#10;    private val loggingInterceptor = HttpLoggingInterceptor().apply {&#10;        level = HttpLoggingInterceptor.Level.BODY&#10;    }&#10;&#10;    private val okHttpClient = OkHttpClient.Builder()&#10;        .addInterceptor(loggingInterceptor)&#10;        .connectTimeout(30, TimeUnit.SECONDS)&#10;        .readTimeout(30, TimeUnit.SECONDS)&#10;        .writeTimeout(30, TimeUnit.SECONDS)&#10;        .build()&#10;&#10;    private val gson = GsonBuilder()&#10;        .setLenient()&#10;        .create()&#10;&#10;    private val retrofit: Retrofit = Retrofit.Builder()&#10;        .baseUrl(ApiConfig.SUPABASE_URL + &quot;/&quot;)&#10;        .client(okHttpClient)&#10;        .addConverterFactory(GsonConverterFactory.create(gson))&#10;        .build()&#10;&#10;    val apiService: ApiService = retrofit.create(ApiService::class.java)&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/VolleyClient.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/VolleyClient.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;import android.content.Context&#10;import com.android.volley.Request&#10;import com.android.volley.RequestQueue&#10;import com.android.volley.toolbox.JsonArrayRequest&#10;import com.android.volley.toolbox.StringRequest&#10;import com.android.volley.toolbox.Volley&#10;import com.google.gson.Gson&#10;import com.google.gson.reflect.TypeToken&#10;import kotlinx.coroutines.suspendCancellableCoroutine&#10;import org.json.JSONArray&#10;import org.json.JSONObject&#10;import kotlin.coroutines.resume&#10;&#10;/**&#10; * HTTP client using Volley library for REST API communication&#10; * Demonstrates thread-based network communication with callbacks&#10; */&#10;class VolleyClient(context: Context) {&#10;&#10;    private val requestQueue: RequestQueue = Volley.newRequestQueue(context.applicationContext)&#10;    private val gson = Gson()&#10;&#10;    /**&#10;     * GET all workout logs using Volley&#10;     * Uses callback-based threading for network operations&#10;     */&#10;    suspend fun getAllWorkoutLogs(): Result&lt;List&lt;WorkoutLogDto&gt;&gt; = suspendCancellableCoroutine { continuation -&gt;&#10;        val url = &quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?select=*&amp;order=timestamp.desc&quot;&#10;&#10;        val request = object : JsonArrayRequest(&#10;            Method.GET,&#10;            url,&#10;            null,&#10;            { response -&gt;&#10;                try {&#10;                    val type = object : TypeToken&lt;List&lt;WorkoutLogDto&gt;&gt;() {}.type&#10;                    val logs: List&lt;WorkoutLogDto&gt; = gson.fromJson(response.toString(), type)&#10;                    continuation.resume(Result.success(logs))&#10;                } catch (e: Exception) {&#10;                    continuation.resume(Result.failure(e))&#10;                }&#10;            },&#10;            { error -&gt;&#10;                continuation.resume(Result.failure(Exception(error.message ?: &quot;Volley error&quot;)))&#10;            }&#10;        ) {&#10;            override fun getHeaders(): MutableMap&lt;String, String&gt; {&#10;                return mutableMapOf(&#10;                    &quot;apikey&quot; to ApiConfig.SUPABASE_KEY,&#10;                    &quot;Authorization&quot; to &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;                    &quot;Content-Type&quot; to &quot;application/json&quot;&#10;                )&#10;            }&#10;        }&#10;&#10;        requestQueue.add(request)&#10;&#10;        continuation.invokeOnCancellation {&#10;            request.cancel()&#10;        }&#10;    }&#10;&#10;    /**&#10;     * POST a new workout log using Volley&#10;     * Uses callback-based threading for network operations&#10;     */&#10;    suspend fun createWorkoutLog(workoutLog: CreateWorkoutLogRequest): Result&lt;WorkoutLogDto&gt; = suspendCancellableCoroutine { continuation -&gt;&#10;        val url = &quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}&quot;&#10;        val jsonBody = gson.toJson(workoutLog)&#10;&#10;        val request = object : StringRequest(&#10;            Method.POST,&#10;            url,&#10;            { response -&gt;&#10;                try {&#10;                    val type = object : TypeToken&lt;List&lt;WorkoutLogDto&gt;&gt;() {}.type&#10;                    val logs: List&lt;WorkoutLogDto&gt; = gson.fromJson(response, type)&#10;                    if (logs.isNotEmpty()) {&#10;                        continuation.resume(Result.success(logs.first()))&#10;                    } else {&#10;                        continuation.resume(Result.failure(Exception(&quot;Empty response&quot;)))&#10;                    }&#10;                } catch (e: Exception) {&#10;                    continuation.resume(Result.failure(e))&#10;                }&#10;            },&#10;            { error -&gt;&#10;                continuation.resume(Result.failure(Exception(error.message ?: &quot;Volley error&quot;)))&#10;            }&#10;        ) {&#10;            override fun getHeaders(): MutableMap&lt;String, String&gt; {&#10;                return mutableMapOf(&#10;                    &quot;apikey&quot; to ApiConfig.SUPABASE_KEY,&#10;                    &quot;Authorization&quot; to &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;,&#10;                    &quot;Content-Type&quot; to &quot;application/json&quot;,&#10;                    &quot;Prefer&quot; to &quot;return=representation&quot;&#10;                )&#10;            }&#10;&#10;            override fun getBody(): ByteArray {&#10;                return jsonBody.toByteArray(Charsets.UTF_8)&#10;            }&#10;&#10;            override fun getBodyContentType(): String {&#10;                return &quot;application/json; charset=utf-8&quot;&#10;            }&#10;        }&#10;&#10;        requestQueue.add(request)&#10;&#10;        continuation.invokeOnCancellation {&#10;            request.cancel()&#10;        }&#10;    }&#10;&#10;    /**&#10;     * DELETE a workout log by timestamp using Volley&#10;     * Uses callback-based threading for network operations&#10;     */&#10;    suspend fun deleteWorkoutLog(timestamp: Long): Result&lt;Unit&gt; = suspendCancellableCoroutine { continuation -&gt;&#10;        val url = &quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?timestamp=eq.$timestamp&quot;&#10;&#10;        val request = object : StringRequest(&#10;            Method.DELETE,&#10;            url,&#10;            { _ -&gt;&#10;                continuation.resume(Result.success(Unit))&#10;            },&#10;            { error -&gt;&#10;                continuation.resume(Result.failure(Exception(error.message ?: &quot;Volley error&quot;)))&#10;            }&#10;        ) {&#10;            override fun getHeaders(): MutableMap&lt;String, String&gt; {&#10;                return mutableMapOf(&#10;                    &quot;apikey&quot; to ApiConfig.SUPABASE_KEY,&#10;                    &quot;Authorization&quot; to &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;&#10;                )&#10;            }&#10;        }&#10;&#10;        requestQueue.add(request)&#10;&#10;        continuation.invokeOnCancellation {&#10;            request.cancel()&#10;        }&#10;    }&#10;&#10;    /**&#10;     * DELETE all workout logs using Volley&#10;     * Uses callback-based threading for network operations&#10;     */&#10;    suspend fun deleteAllWorkoutLogs(): Result&lt;Unit&gt; = suspendCancellableCoroutine { continuation -&gt;&#10;        val url = &quot;${ApiConfig.SUPABASE_URL}/rest/v1/${ApiConfig.TABLE_WORKOUT_LOGS}?id=neq.null&quot;&#10;&#10;        val request = object : StringRequest(&#10;            Method.DELETE,&#10;            url,&#10;            { _ -&gt;&#10;                continuation.resume(Result.success(Unit))&#10;            },&#10;            { error -&gt;&#10;                continuation.resume(Result.failure(Exception(error.message ?: &quot;Volley error&quot;)))&#10;            }&#10;        ) {&#10;            override fun getHeaders(): MutableMap&lt;String, String&gt; {&#10;                return mutableMapOf(&#10;                    &quot;apikey&quot; to ApiConfig.SUPABASE_KEY,&#10;                    &quot;Authorization&quot; to &quot;Bearer ${ApiConfig.SUPABASE_KEY}&quot;&#10;                )&#10;            }&#10;        }&#10;&#10;        requestQueue.add(request)&#10;&#10;        continuation.invokeOnCancellation {&#10;            request.cancel()&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/WorkoutLogDto.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/api/WorkoutLogDto.kt" />
              <option name="updatedContent" value="package com.example.pamproject.api&#10;&#10;import com.google.gson.annotations.SerializedName&#10;&#10;/**&#10; * Data class representing WorkoutLog for API communication with Supabase&#10; * This matches the database schema in Supabase&#10; */&#10;data class WorkoutLogDto(&#10;    @SerializedName(&quot;id&quot;)&#10;    val id: String? = null,&#10;&#10;    @SerializedName(&quot;date&quot;)&#10;    val date: String,&#10;&#10;    @SerializedName(&quot;time&quot;)&#10;    val time: String,&#10;&#10;    @SerializedName(&quot;workout&quot;)&#10;    val workout: String,&#10;&#10;    @SerializedName(&quot;duration_minutes&quot;)&#10;    val durationMinutes: Double,&#10;&#10;    @SerializedName(&quot;calories&quot;)&#10;    val calories: Double,&#10;&#10;    @SerializedName(&quot;timestamp&quot;)&#10;    val timestamp: Long,&#10;&#10;    @SerializedName(&quot;image_uri&quot;)&#10;    val imageUri: String? = null,&#10;&#10;    @SerializedName(&quot;created_at&quot;)&#10;    val createdAt: String? = null&#10;)&#10;&#10;/**&#10; * Request body for creating a new workout log (excludes id and created_at)&#10; */&#10;data class CreateWorkoutLogRequest(&#10;    @SerializedName(&quot;date&quot;)&#10;    val date: String,&#10;&#10;    @SerializedName(&quot;time&quot;)&#10;    val time: String,&#10;&#10;    @SerializedName(&quot;workout&quot;)&#10;    val workout: String,&#10;&#10;    @SerializedName(&quot;duration_minutes&quot;)&#10;    val durationMinutes: Double,&#10;&#10;    @SerializedName(&quot;calories&quot;)&#10;    val calories: Double,&#10;&#10;    @SerializedName(&quot;timestamp&quot;)&#10;    val timestamp: Long,&#10;&#10;    @SerializedName(&quot;image_uri&quot;)&#10;    val imageUri: String? = null&#10;)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/data/WorkoutRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/data/WorkoutRepository.kt" />
              <option name="originalContent" value="package com.example.pamproject.data&#10;&#10;import android.content.Context&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.WorkoutLog&#10;import org.json.JSONArray&#10;import org.json.JSONObject&#10;import java.time.LocalDate&#10;import java.time.LocalDateTime&#10;import java.time.LocalTime&#10;import java.time.ZoneId&#10;import java.time.format.TextStyle&#10;import java.util.Locale&#10;&#10;class WorkoutRepository(private val context: Context) {&#10;    private val sharedPreferences =&#10;        context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)&#10;&#10;    fun loadLogs(): List&lt;WorkoutLog&gt; {&#10;        val raw = sharedPreferences.getString(KEY_WORKOUT_LOGS, null) ?: return emptyList()&#10;        return try {&#10;            val jsonArray = JSONArray(raw)&#10;            List(jsonArray.length()) { index -&gt;&#10;                jsonArray.getJSONObject(index).toWorkoutLog()&#10;            }&#10;        } catch (_: Exception) {&#10;            emptyList()&#10;        }&#10;    }&#10;&#10;    fun saveLogs(logs: List&lt;WorkoutLog&gt;) {&#10;        val jsonArray = JSONArray().apply {&#10;            logs.forEach { log -&gt;&#10;                put(log.toJson())&#10;            }&#10;        }&#10;        sharedPreferences.edit().putString(KEY_WORKOUT_LOGS, jsonArray.toString()).apply()&#10;    }&#10;&#10;    fun addLog(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        val updated = loadLogs() + log&#10;        saveLogs(updated)&#10;        return updated&#10;    }&#10;&#10;    fun deleteLog(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        val updated = loadLogs().filterNot { it.timestamp == log.timestamp }&#10;        saveLogs(updated)&#10;        return updated&#10;    }&#10;&#10;    fun clearLogs(): List&lt;WorkoutLog&gt; {&#10;        saveLogs(emptyList())&#10;        return emptyList()&#10;    }&#10;&#10;    fun calculateTodayStats(logs: List&lt;WorkoutLog&gt;): DailyStats {&#10;        val today = LocalDate.now().toString()&#10;        val todayLogs = logs.filter { it.date == today }&#10;        val totalDuration = todayLogs.sumOf { it.durationMinutes }&#10;        val totalCalories = todayLogs.sumOf { it.calories }&#10;        return DailyStats(&#10;            totalDurationMinutes = totalDuration,&#10;            totalCalories = totalCalories,&#10;            streak = calculateStreak(logs)&#10;        )&#10;    }&#10;&#10;    fun getRecentProgress(logs: List&lt;WorkoutLog&gt;, days: Int = 7): List&lt;DailyProgress&gt; {&#10;        val today = LocalDate.now()&#10;        return (0 until days).map { index -&gt;&#10;            val date = today.minusDays((days - 1 - index).toLong())&#10;            val label = when (date.dayOfWeek.value) {&#10;                1 -&gt; &quot;Mon&quot;&#10;                2 -&gt; &quot;Tue&quot;&#10;                3 -&gt; &quot;Wed&quot;&#10;                4 -&gt; &quot;Thu&quot;&#10;                5 -&gt; &quot;Fri&quot;&#10;                6 -&gt; &quot;Sat&quot;&#10;                7 -&gt; &quot;Sun&quot;&#10;                else -&gt; &quot;---&quot;&#10;            }&#10;            val logsForDate = logs.filter { it.date == date.toString() }&#10;&#10;            DailyProgress(&#10;                dateLabel = label,&#10;                totalCalories = logsForDate.sumOf { it.calories },&#10;                totalDurationMinutes = logsForDate.sumOf { it.durationMinutes }&#10;            )&#10;        }&#10;    }&#10;&#10;    private fun calculateStreak(logs: List&lt;WorkoutLog&gt;): Int {&#10;        if (logs.isEmpty()) return 0&#10;        val uniqueDates = logs.mapNotNull {&#10;            runCatching { LocalDate.parse(it.date) }.getOrNull()&#10;        }.distinct().sortedDescending()&#10;&#10;        var streak = 0&#10;        var cursor = LocalDate.now()&#10;        for (date in uniqueDates) {&#10;            if (date == cursor) {&#10;                streak++&#10;                cursor = cursor.minusDays(1)&#10;            } else {&#10;                break&#10;            }&#10;        }&#10;        return streak&#10;    }&#10;&#10;    private fun JSONObject.toWorkoutLog(): WorkoutLog {&#10;        val date = optString(&quot;date&quot;, LocalDate.now().toString())&#10;        val time = optString(&quot;time&quot;, &quot;00:00&quot;)&#10;        val storedTimestamp = optLong(&quot;timestamp&quot;, -1L)&#10;        val imageUri = optString(&quot;imageUri&quot;, null)&#10;&#10;        // If no timestamp stored, create one from date + time&#10;        val timestamp = if (storedTimestamp == -1L) {&#10;            try {&#10;                val localDate = LocalDate.parse(date)&#10;                val localTime = LocalTime.parse(time)&#10;                val dateTime = LocalDateTime.of(localDate, localTime)&#10;                dateTime.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()&#10;            } catch (e: Exception) {&#10;                0L // Very old timestamp so it appears last&#10;            }&#10;        } else {&#10;            storedTimestamp&#10;        }&#10;&#10;        return WorkoutLog(&#10;            date = date,&#10;            time = time,&#10;            workout = optString(&quot;workout&quot;),&#10;            durationMinutes = optDouble(&quot;duration&quot;),&#10;            calories = optDouble(&quot;calories&quot;),&#10;            timestamp = timestamp,&#10;            imageUri = imageUri&#10;        )&#10;    }&#10;&#10;    private fun WorkoutLog.toJson(): JSONObject {&#10;        return JSONObject().apply {&#10;            put(&quot;date&quot;, date)&#10;            put(&quot;time&quot;, time)&#10;            put(&quot;workout&quot;, workout)&#10;            put(&quot;duration&quot;, durationMinutes)&#10;            put(&quot;calories&quot;, calories)&#10;            put(&quot;timestamp&quot;, timestamp)&#10;            if (imageUri != null) {&#10;                put(&quot;imageUri&quot;, imageUri)&#10;            }&#10;        }&#10;    }&#10;&#10;    companion object {&#10;        private const val PREF_NAME = &quot;workout_prefs&quot;&#10;        private const val KEY_WORKOUT_LOGS = &quot;workoutLogs&quot;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.data&#10;&#10;import android.content.Context&#10;import android.util.Log&#10;import com.example.pamproject.api.ApiService&#10;import com.example.pamproject.api.CreateWorkoutLogRequest&#10;import com.example.pamproject.api.HttpUrlConnectionClient&#10;import com.example.pamproject.api.RetrofitClient&#10;import com.example.pamproject.api.VolleyClient&#10;import com.example.pamproject.api.WorkoutLogDto&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.WorkoutLog&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import org.json.JSONArray&#10;import org.json.JSONObject&#10;import java.time.LocalDate&#10;import java.time.LocalDateTime&#10;import java.time.LocalTime&#10;import java.time.ZoneId&#10;import java.time.format.TextStyle&#10;import java.util.Locale&#10;&#10;/**&#10; * Repository for workout logs that supports multiple REST API clients&#10; * Implements client-server communication using threads&#10; */&#10;enum class ApiClientType {&#10;    RETROFIT,           // Uses Retrofit library with GSON&#10;    HTTP_URL_CONNECTION, // Uses HttpURLConnection&#10;    VOLLEY              // Uses Volley library&#10;}&#10;&#10;class WorkoutRepository(private val context: Context) {&#10;    private val sharedPreferences =&#10;        context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)&#10;&#10;    // API Clients for REST communication&#10;    private val retrofitService: ApiService = RetrofitClient.apiService&#10;    private val httpUrlConnectionClient = HttpUrlConnectionClient()&#10;    private val volleyClient = VolleyClient(context)&#10;&#10;    // Current API client type - can be switched at runtime&#10;    var currentApiClient: ApiClientType = ApiClientType.RETROFIT&#10;&#10;    companion object {&#10;        private const val TAG = &quot;WorkoutRepository&quot;&#10;        private const val PREF_NAME = &quot;workout_prefs&quot;&#10;        private const val KEY_WORKOUT_LOGS = &quot;workoutLogs&quot;&#10;    }&#10;&#10;    // ==================== REST API Methods ====================&#10;&#10;    /**&#10;     * Load logs from Supabase REST API using current client&#10;     * Runs on IO thread for network operations&#10;     */&#10;    suspend fun loadLogsFromApi(): List&lt;WorkoutLog&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            when (currentApiClient) {&#10;                ApiClientType.RETROFIT -&gt; loadLogsWithRetrofit()&#10;                ApiClientType.HTTP_URL_CONNECTION -&gt; loadLogsWithHttpUrlConnection()&#10;                ApiClientType.VOLLEY -&gt; loadLogsWithVolley()&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;Error loading logs from API: ${e.message}&quot;)&#10;            // Fallback to local storage&#10;            loadLogs()&#10;        }&#10;    }&#10;&#10;    private suspend fun loadLogsWithRetrofit(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Loading logs with Retrofit on thread: ${Thread.currentThread().name}&quot;)&#10;        val response = retrofitService.getAllWorkoutLogs()&#10;        return if (response.isSuccessful) {&#10;            val dtoList = response.body() ?: emptyList()&#10;            dtoList.map { it.toWorkoutLog() }.also {&#10;                // Cache locally&#10;                saveLogs(it)&#10;            }&#10;        } else {&#10;            Log.e(TAG, &quot;Retrofit error: ${response.code()} - ${response.message()}&quot;)&#10;            loadLogs()&#10;        }&#10;    }&#10;&#10;    private suspend fun loadLogsWithHttpUrlConnection(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Loading logs with HttpUrlConnection on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = httpUrlConnectionClient.getAllWorkoutLogs()&#10;        return result.fold(&#10;            onSuccess = { dtoList -&gt;&#10;                dtoList.map { it.toWorkoutLog() }.also {&#10;                    saveLogs(it)&#10;                }&#10;            },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;HttpUrlConnection error: ${e.message}&quot;)&#10;                loadLogs()&#10;            }&#10;        )&#10;    }&#10;&#10;    private suspend fun loadLogsWithVolley(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Loading logs with Volley on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = volleyClient.getAllWorkoutLogs()&#10;        return result.fold(&#10;            onSuccess = { dtoList -&gt;&#10;                dtoList.map { it.toWorkoutLog() }.also {&#10;                    saveLogs(it)&#10;                }&#10;            },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;Volley error: ${e.message}&quot;)&#10;                loadLogs()&#10;            }&#10;        )&#10;    }&#10;&#10;    /**&#10;     * Add log to Supabase REST API using current client&#10;     * Runs on IO thread for network operations&#10;     */&#10;    suspend fun addLogToApi(log: WorkoutLog): List&lt;WorkoutLog&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val request = log.toCreateRequest()&#10;            when (currentApiClient) {&#10;                ApiClientType.RETROFIT -&gt; addLogWithRetrofit(request, log)&#10;                ApiClientType.HTTP_URL_CONNECTION -&gt; addLogWithHttpUrlConnection(request, log)&#10;                ApiClientType.VOLLEY -&gt; addLogWithVolley(request, log)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;Error adding log to API: ${e.message}&quot;)&#10;            // Fallback to local storage&#10;            addLog(log)&#10;        }&#10;    }&#10;&#10;    private suspend fun addLogWithRetrofit(request: CreateWorkoutLogRequest, log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Adding log with Retrofit on thread: ${Thread.currentThread().name}&quot;)&#10;        val response = retrofitService.createWorkoutLog(workoutLog = request)&#10;        return if (response.isSuccessful) {&#10;            loadLogsFromApi()&#10;        } else {&#10;            Log.e(TAG, &quot;Retrofit error: ${response.code()} - ${response.message()}&quot;)&#10;            addLog(log)&#10;        }&#10;    }&#10;&#10;    private suspend fun addLogWithHttpUrlConnection(request: CreateWorkoutLogRequest, log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Adding log with HttpUrlConnection on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = httpUrlConnectionClient.createWorkoutLog(request)&#10;        return result.fold(&#10;            onSuccess = { loadLogsFromApi() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;HttpUrlConnection error: ${e.message}&quot;)&#10;                addLog(log)&#10;            }&#10;        )&#10;    }&#10;&#10;    private suspend fun addLogWithVolley(request: CreateWorkoutLogRequest, log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Adding log with Volley on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = volleyClient.createWorkoutLog(request)&#10;        return result.fold(&#10;            onSuccess = { loadLogsFromApi() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;Volley error: ${e.message}&quot;)&#10;                addLog(log)&#10;            }&#10;        )&#10;    }&#10;&#10;    /**&#10;     * Delete log from Supabase REST API using current client&#10;     * Runs on IO thread for network operations&#10;     */&#10;    suspend fun deleteLogFromApi(log: WorkoutLog): List&lt;WorkoutLog&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            when (currentApiClient) {&#10;                ApiClientType.RETROFIT -&gt; deleteLogWithRetrofit(log)&#10;                ApiClientType.HTTP_URL_CONNECTION -&gt; deleteLogWithHttpUrlConnection(log)&#10;                ApiClientType.VOLLEY -&gt; deleteLogWithVolley(log)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;Error deleting log from API: ${e.message}&quot;)&#10;            deleteLog(log)&#10;        }&#10;    }&#10;&#10;    private suspend fun deleteLogWithRetrofit(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Deleting log with Retrofit on thread: ${Thread.currentThread().name}&quot;)&#10;        val response = retrofitService.deleteWorkoutLog(timestamp = &quot;eq.${log.timestamp}&quot;)&#10;        return if (response.isSuccessful) {&#10;            loadLogsFromApi()&#10;        } else {&#10;            Log.e(TAG, &quot;Retrofit error: ${response.code()}&quot;)&#10;            deleteLog(log)&#10;        }&#10;    }&#10;&#10;    private suspend fun deleteLogWithHttpUrlConnection(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Deleting log with HttpUrlConnection on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = httpUrlConnectionClient.deleteWorkoutLog(log.timestamp)&#10;        return result.fold(&#10;            onSuccess = { loadLogsFromApi() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;HttpUrlConnection error: ${e.message}&quot;)&#10;                deleteLog(log)&#10;            }&#10;        )&#10;    }&#10;&#10;    private suspend fun deleteLogWithVolley(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Deleting log with Volley on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = volleyClient.deleteWorkoutLog(log.timestamp)&#10;        return result.fold(&#10;            onSuccess = { loadLogsFromApi() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;Volley error: ${e.message}&quot;)&#10;                deleteLog(log)&#10;            }&#10;        )&#10;    }&#10;&#10;    /**&#10;     * Clear all logs from Supabase REST API using current client&#10;     * Runs on IO thread for network operations&#10;     */&#10;    suspend fun clearLogsFromApi(): List&lt;WorkoutLog&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            when (currentApiClient) {&#10;                ApiClientType.RETROFIT -&gt; clearLogsWithRetrofit()&#10;                ApiClientType.HTTP_URL_CONNECTION -&gt; clearLogsWithHttpUrlConnection()&#10;                ApiClientType.VOLLEY -&gt; clearLogsWithVolley()&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;Error clearing logs from API: ${e.message}&quot;)&#10;            clearLogs()&#10;        }&#10;    }&#10;&#10;    private suspend fun clearLogsWithRetrofit(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Clearing logs with Retrofit on thread: ${Thread.currentThread().name}&quot;)&#10;        val response = retrofitService.deleteAllWorkoutLogs()&#10;        return if (response.isSuccessful) {&#10;            clearLogs()&#10;        } else {&#10;            Log.e(TAG, &quot;Retrofit error: ${response.code()}&quot;)&#10;            clearLogs()&#10;        }&#10;    }&#10;&#10;    private suspend fun clearLogsWithHttpUrlConnection(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Clearing logs with HttpUrlConnection on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = httpUrlConnectionClient.deleteAllWorkoutLogs()&#10;        return result.fold(&#10;            onSuccess = { clearLogs() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;HttpUrlConnection error: ${e.message}&quot;)&#10;                clearLogs()&#10;            }&#10;        )&#10;    }&#10;&#10;    private suspend fun clearLogsWithVolley(): List&lt;WorkoutLog&gt; {&#10;        Log.d(TAG, &quot;Clearing logs with Volley on thread: ${Thread.currentThread().name}&quot;)&#10;        val result = volleyClient.deleteAllWorkoutLogs()&#10;        return result.fold(&#10;            onSuccess = { clearLogs() },&#10;            onFailure = { e -&gt;&#10;                Log.e(TAG, &quot;Volley error: ${e.message}&quot;)&#10;                clearLogs()&#10;            }&#10;        )&#10;    }&#10;&#10;    // ==================== DTO Conversion ====================&#10;&#10;    private fun WorkoutLogDto.toWorkoutLog(): WorkoutLog {&#10;        return WorkoutLog(&#10;            date = this.date,&#10;            time = this.time,&#10;            workout = this.workout,&#10;            durationMinutes = this.durationMinutes,&#10;            calories = this.calories,&#10;            timestamp = this.timestamp,&#10;            imageUri = this.imageUri&#10;        )&#10;    }&#10;&#10;    private fun WorkoutLog.toCreateRequest(): CreateWorkoutLogRequest {&#10;        return CreateWorkoutLogRequest(&#10;            date = this.date,&#10;            time = this.time,&#10;            workout = this.workout,&#10;            durationMinutes = this.durationMinutes,&#10;            calories = this.calories,&#10;            timestamp = this.timestamp,&#10;            imageUri = this.imageUri&#10;        )&#10;    }&#10;&#10;    // ==================== Local Storage Methods (Fallback) ====================&#10;&#10;    fun loadLogs(): List&lt;WorkoutLog&gt; {&#10;        val raw = sharedPreferences.getString(KEY_WORKOUT_LOGS, null) ?: return emptyList()&#10;        return try {&#10;            val jsonArray = JSONArray(raw)&#10;            List(jsonArray.length()) { index -&gt;&#10;                jsonArray.getJSONObject(index).toWorkoutLog()&#10;            }&#10;        } catch (_: Exception) {&#10;            emptyList()&#10;        }&#10;    }&#10;&#10;    fun saveLogs(logs: List&lt;WorkoutLog&gt;) {&#10;        val jsonArray = JSONArray().apply {&#10;            logs.forEach { log -&gt;&#10;                put(log.toJson())&#10;            }&#10;        }&#10;        sharedPreferences.edit().putString(KEY_WORKOUT_LOGS, jsonArray.toString()).apply()&#10;    }&#10;&#10;    fun addLog(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        val updated = loadLogs() + log&#10;        saveLogs(updated)&#10;        return updated&#10;    }&#10;&#10;    fun deleteLog(log: WorkoutLog): List&lt;WorkoutLog&gt; {&#10;        val updated = loadLogs().filterNot { it.timestamp == log.timestamp }&#10;        saveLogs(updated)&#10;        return updated&#10;    }&#10;&#10;    fun clearLogs(): List&lt;WorkoutLog&gt; {&#10;        saveLogs(emptyList())&#10;        return emptyList()&#10;    }&#10;&#10;    fun calculateTodayStats(logs: List&lt;WorkoutLog&gt;): DailyStats {&#10;        val today = LocalDate.now().toString()&#10;        val todayLogs = logs.filter { it.date == today }&#10;        val totalDuration = todayLogs.sumOf { it.durationMinutes }&#10;        val totalCalories = todayLogs.sumOf { it.calories }&#10;        return DailyStats(&#10;            totalDurationMinutes = totalDuration,&#10;            totalCalories = totalCalories,&#10;            streak = calculateStreak(logs)&#10;        )&#10;    }&#10;&#10;    fun getRecentProgress(logs: List&lt;WorkoutLog&gt;, days: Int = 7): List&lt;DailyProgress&gt; {&#10;        val today = LocalDate.now()&#10;        return (0 until days).map { index -&gt;&#10;            val date = today.minusDays((days - 1 - index).toLong())&#10;            val label = when (date.dayOfWeek.value) {&#10;                1 -&gt; &quot;Mon&quot;&#10;                2 -&gt; &quot;Tue&quot;&#10;                3 -&gt; &quot;Wed&quot;&#10;                4 -&gt; &quot;Thu&quot;&#10;                5 -&gt; &quot;Fri&quot;&#10;                6 -&gt; &quot;Sat&quot;&#10;                7 -&gt; &quot;Sun&quot;&#10;                else -&gt; &quot;---&quot;&#10;            }&#10;            val logsForDate = logs.filter { it.date == date.toString() }&#10;&#10;            DailyProgress(&#10;                dateLabel = label,&#10;                totalCalories = logsForDate.sumOf { it.calories },&#10;                totalDurationMinutes = logsForDate.sumOf { it.durationMinutes }&#10;            )&#10;        }&#10;    }&#10;&#10;    private fun calculateStreak(logs: List&lt;WorkoutLog&gt;): Int {&#10;        if (logs.isEmpty()) return 0&#10;        val uniqueDates = logs.mapNotNull {&#10;            runCatching { LocalDate.parse(it.date) }.getOrNull()&#10;        }.distinct().sortedDescending()&#10;&#10;        var streak = 0&#10;        var cursor = LocalDate.now()&#10;        for (date in uniqueDates) {&#10;            if (date == cursor) {&#10;                streak++&#10;                cursor = cursor.minusDays(1)&#10;            } else {&#10;                break&#10;            }&#10;        }&#10;        return streak&#10;    }&#10;&#10;    private fun JSONObject.toWorkoutLog(): WorkoutLog {&#10;        val date = optString(&quot;date&quot;, LocalDate.now().toString())&#10;        val time = optString(&quot;time&quot;, &quot;00:00&quot;)&#10;        val storedTimestamp = optLong(&quot;timestamp&quot;, -1L)&#10;        val imageUri = optString(&quot;imageUri&quot;, null)&#10;&#10;        // If no timestamp stored, create one from date + time&#10;        val timestamp = if (storedTimestamp == -1L) {&#10;            try {&#10;                val localDate = LocalDate.parse(date)&#10;                val localTime = LocalTime.parse(time)&#10;                val dateTime = LocalDateTime.of(localDate, localTime)&#10;                dateTime.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()&#10;            } catch (e: Exception) {&#10;                0L // Very old timestamp so it appears last&#10;            }&#10;        } else {&#10;            storedTimestamp&#10;        }&#10;&#10;        return WorkoutLog(&#10;            date = date,&#10;            time = time,&#10;            workout = optString(&quot;workout&quot;),&#10;            durationMinutes = optDouble(&quot;duration&quot;),&#10;            calories = optDouble(&quot;calories&quot;),&#10;            timestamp = timestamp,&#10;            imageUri = imageUri&#10;        )&#10;    }&#10;&#10;    private fun WorkoutLog.toJson(): JSONObject {&#10;        return JSONObject().apply {&#10;            put(&quot;date&quot;, date)&#10;            put(&quot;time&quot;, time)&#10;            put(&quot;workout&quot;, workout)&#10;            put(&quot;duration&quot;, durationMinutes)&#10;            put(&quot;calories&quot;, calories)&#10;            put(&quot;timestamp&quot;, timestamp)&#10;            if (imageUri != null) {&#10;                put(&quot;imageUri&quot;, imageUri)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/navigation/AppNavigation.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/navigation/AppNavigation.kt" />
              <option name="originalContent" value="package com.example.pamproject.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.navArgument&#10;import com.example.pamproject.data.WorkoutRepository&#10;import com.example.pamproject.ui.screen.DashboardScreen&#10;import com.example.pamproject.ui.screen.WorkoutSessionScreen&#10;import com.example.pamproject.viewmodel.WorkoutViewModel&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.setValue&#10;&#10;@Composable&#10;fun AppNavigation(&#10;    navController: NavHostController,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val context = LocalContext.current&#10;    val repository = remember(context) { WorkoutRepository(context) }&#10;    val workoutViewModel: WorkoutViewModel = viewModel(&#10;        factory = WorkoutViewModel.provideFactory(repository)&#10;    )&#10;&#10;    val stats by workoutViewModel.todayStats.collectAsState()&#10;    val weeklyProgress by workoutViewModel.weeklyProgress.collectAsState()&#10;    val logs by workoutViewModel.logs.collectAsState()&#10;    val timerState by workoutViewModel.timerState.collectAsState()&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Dashboard.route,&#10;        modifier = modifier&#10;    ) {&#10;        composable(route = Screen.Dashboard.route) {&#10;            DashboardScreen(&#10;                stats = stats,&#10;                progress = weeklyProgress,&#10;                workouts = workoutViewModel.workouts,&#10;                logs = logs,&#10;                onWorkoutClick = { workoutId -&gt;&#10;                    workoutViewModel.startSession(workoutId)&#10;                    navController.navigate(Screen.Session.createRoute(workoutId))&#10;                },&#10;                onDeleteLog = workoutViewModel::deleteLog,&#10;                onDeleteAllLogs = workoutViewModel::clearLogs&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.Session.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;workoutId&quot;) { type = NavType.IntType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val workoutId = backStackEntry.arguments?.getInt(&quot;workoutId&quot;)&#10;            val workout = workoutId?.let { workoutViewModel.getWorkoutById(it) }&#10;&#10;            var pendingImageUri by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;            WorkoutSessionScreen(&#10;                workout = workout,&#10;                timerState = timerState,&#10;                onStart = workoutViewModel::startTimer,&#10;                onPause = workoutViewModel::pauseTimer,&#10;                onResume = workoutViewModel::resumeTimer,&#10;                onFinish = { uri -&gt;&#10;                    val result = workoutViewModel.finishWorkout(uri)&#10;                    result&#10;                },&#10;                onBack = {&#10;                    workoutViewModel.cancelSession()&#10;                    navController.navigateUp()&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.navArgument&#10;import com.example.pamproject.data.WorkoutRepository&#10;import com.example.pamproject.ui.screen.DashboardScreen&#10;import com.example.pamproject.ui.screen.WorkoutSessionScreen&#10;import com.example.pamproject.viewmodel.WorkoutViewModel&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.setValue&#10;&#10;@Composable&#10;fun AppNavigation(&#10;    navController: NavHostController,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val context = LocalContext.current&#10;    val repository = remember(context) { WorkoutRepository(context) }&#10;    val workoutViewModel: WorkoutViewModel = viewModel(&#10;        factory = WorkoutViewModel.provideFactory(repository)&#10;    )&#10;&#10;    val stats by workoutViewModel.todayStats.collectAsState()&#10;    val weeklyProgress by workoutViewModel.weeklyProgress.collectAsState()&#10;    val logs by workoutViewModel.logs.collectAsState()&#10;    val timerState by workoutViewModel.timerState.collectAsState()&#10;    val isLoading by workoutViewModel.isLoading.collectAsState()&#10;    val currentApiClient by workoutViewModel.currentApiClient.collectAsState()&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Dashboard.route,&#10;        modifier = modifier&#10;    ) {&#10;        composable(route = Screen.Dashboard.route) {&#10;            DashboardScreen(&#10;                stats = stats,&#10;                progress = weeklyProgress,&#10;                workouts = workoutViewModel.workouts,&#10;                logs = logs,&#10;                isLoading = isLoading,&#10;                currentApiClient = currentApiClient,&#10;                onApiClientChange = workoutViewModel::switchApiClient,&#10;                onRefresh = workoutViewModel::loadLogsFromApi,&#10;                onWorkoutClick = { workoutId -&gt;&#10;                    workoutViewModel.startSession(workoutId)&#10;                    navController.navigate(Screen.Session.createRoute(workoutId))&#10;                },&#10;                onDeleteLog = workoutViewModel::deleteLog,&#10;                onDeleteAllLogs = workoutViewModel::clearLogs&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.Session.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;workoutId&quot;) { type = NavType.IntType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val workoutId = backStackEntry.arguments?.getInt(&quot;workoutId&quot;)&#10;            val workout = workoutId?.let { workoutViewModel.getWorkoutById(it) }&#10;&#10;            var pendingImageUri by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;            WorkoutSessionScreen(&#10;                workout = workout,&#10;                timerState = timerState,&#10;                onStart = workoutViewModel::startTimer,&#10;                onPause = workoutViewModel::pauseTimer,&#10;                onResume = workoutViewModel::resumeTimer,&#10;                onFinish = { uri -&gt;&#10;                    val result = workoutViewModel.finishWorkout(uri)&#10;                    result&#10;                },&#10;                onBack = {&#10;                    workoutViewModel.cancelSession()&#10;                    navController.navigateUp()&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardComponents.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardComponents.kt" />
              <option name="originalContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.width&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.lazy.rememberLazyListState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.AccessTime&#10;import androidx.compose.material.icons.filled.AccessibilityNew&#10;import androidx.compose.material.icons.filled.Bolt&#10;import androidx.compose.material.icons.filled.CalendarToday&#10;import androidx.compose.material.icons.filled.Delete&#10;import androidx.compose.material.icons.filled.DeleteForever&#10;import androidx.compose.material.icons.filled.DirectionsBike&#10;import androidx.compose.material.icons.filled.DirectionsRun&#10;import androidx.compose.material.icons.filled.DirectionsWalk&#10;import androidx.compose.material.icons.filled.FitnessCenter&#10;import androidx.compose.material.icons.filled.LocalFireDepartment&#10;import androidx.compose.material.icons.filled.SelfImprovement&#10;import androidx.compose.material.icons.filled.Whatshot&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.TransformOrigin&#10;import androidx.compose.ui.graphics.graphicsLayer&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.Dp&#10;import androidx.compose.ui.unit.dp&#10;import coil.compose.rememberAsyncImagePainter&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@Composable&#10;fun GreetingCard() {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant),&#10;        shape = RoundedCornerShape(20.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(18.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Column(verticalArrangement = Arrangement.spacedBy(6.dp)) {&#10;                Text(&#10;                    text = &quot;Halo, Atlet!&quot;,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;                Text(&#10;                    text = &quot;Tetap konsisten, targetmu sudah dekat.&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(64.dp)&#10;                    .background(MaterialTheme.colorScheme.background, CircleShape)&#10;                    .border(&#10;                        width = 2.dp,&#10;                        brush = Brush.linearGradient(&#10;                            listOf(&#10;                                MaterialTheme.colorScheme.primary,&#10;                                MaterialTheme.colorScheme.secondary&#10;                            )&#10;                        ),&#10;                        shape = CircleShape&#10;                    ),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = Icons.Default.Bolt,&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.primary&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatsCard(stats: DailyStats, progress: List&lt;DailyProgress&gt;) {&#10;    val caloriesColor = Color(0xFFFF9270)&#10;    val durationColor = Color(0xFF74B4FF)&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surfaceVariant,&#10;            contentColor = MaterialTheme.colorScheme.onSurfaceVariant&#10;        ),&#10;        shape = RoundedCornerShape(20.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 10.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(18.dp),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp)&#10;        ) {&#10;            Column(verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                Text(&#10;                    text = &quot;Progress Hari Ini&quot;,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;                Text(&#10;                    text = &quot;Pantau akumulasi 7 hari terakhir untuk kalori &amp; durasi&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            DailyProgressChart(&#10;                dailyProgress = progress,&#10;                caloriesColor = caloriesColor,&#10;                durationColor = durationColor&#10;            )&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                HighlightStat(&#10;                    title = &quot;Kalori hari ini&quot;,&#10;                    value = &quot;${stats.totalCalories.toInt()} kcal&quot;,&#10;                    icon = Icons.Default.LocalFireDepartment,&#10;                    accent = caloriesColor,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;                HighlightStat(&#10;                    title = &quot;Durasi hari ini&quot;,&#10;                    value = formatMinutes(stats.totalDurationMinutes),&#10;                    icon = Icons.Default.AccessTime,&#10;                    accent = durationColor,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;            }&#10;&#10;            StatChip(&#10;                title = &quot;Streak&quot;,&#10;                value = &quot;${stats.streak} hari&quot;,&#10;                icon = Icons.Default.Whatshot,&#10;                iconColor = Color(0xFFcccccc)&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DailyProgressChart(&#10;    dailyProgress: List&lt;DailyProgress&gt;,&#10;    caloriesColor: Color,&#10;    durationColor: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val maxValue = dailyProgress&#10;        .flatMap { listOf(it.totalCalories, it.totalDurationMinutes) }&#10;        .maxOrNull()&#10;        ?.takeIf { it &gt; 0 }&#10;        ?: 1.0&#10;    val barHeight = 170.dp&#10;    val chartHeight = barHeight + 48.dp&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .background(&#10;                color = MaterialTheme.colorScheme.background,&#10;                shape = RoundedCornerShape(14.dp)&#10;            )&#10;            .padding(14.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            LegendItem(color = caloriesColor, label = &quot;Kalori&quot;)&#10;            LegendItem(color = durationColor, label = &quot;Durasi (mnt)&quot;)&#10;        }&#10;&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(chartHeight),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.Bottom&#10;        ) {&#10;            dailyProgress.forEach { entry -&gt;&#10;                val caloriesHeight = ((entry.totalCalories / maxValue) * barHeight.value).toFloat().dp&#10;                val durationHeight = ((entry.totalDurationMinutes / maxValue) * barHeight.value).toFloat().dp&#10;&#10;                Column(&#10;                    modifier = Modifier.weight(1f),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Bottom&#10;                ) {&#10;                    Row(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(barHeight),&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                        verticalAlignment = Alignment.Bottom&#10;                    ) {&#10;                        Bar(valueHeight = caloriesHeight, color = caloriesColor)&#10;                        Bar(valueHeight = durationHeight, color = durationColor)&#10;                    }&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;                    Text(&#10;                        text = entry.dateLabel,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        fontWeight = FontWeight.Medium,&#10;                        color = MaterialTheme.colorScheme.onBackground,&#10;                        modifier = Modifier.graphicsLayer(&#10;                            rotationZ = -65f,&#10;                            transformOrigin = TransformOrigin(0.5f, 0.5f)&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun Bar(valueHeight: Dp, color: Color) {&#10;    Box(&#10;        modifier = Modifier&#10;            .width(16.dp)&#10;            .height(valueHeight.coerceAtLeast(6.dp))&#10;            .background(color, RoundedCornerShape(topStart = 10.dp, topEnd = 10.dp))&#10;    )&#10;}&#10;&#10;@Composable&#10;private fun LegendItem(color: Color, label: String) {&#10;    Row(&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.spacedBy(6.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .size(14.dp)&#10;                .background(color, RoundedCornerShape(4.dp))&#10;        )&#10;        Text(&#10;            text = label,&#10;            style = MaterialTheme.typography.labelSmall,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HighlightStat(&#10;    title: String,&#10;    value: String,&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    accent: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier,&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.background),&#10;        border = BorderStroke(1.dp, accent.copy(alpha = 0.35f)),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .padding(vertical = 12.dp, horizontal = 14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(34.dp)&#10;                    .background(accent.copy(alpha = 0.14f), CircleShape),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = icon,&#10;                    contentDescription = null,&#10;                    tint = accent&#10;                )&#10;            }&#10;            Column(verticalArrangement = Arrangement.spacedBy(2.dp)) {&#10;                Text(&#10;                    text = title,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = value,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun StatChip(&#10;    title: String,&#10;    value: String,&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    iconColor: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier,&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.background),&#10;        border = BorderStroke(&#10;            width = 1.dp,&#10;            brush = Brush.linearGradient(&#10;                listOf(&#10;                    MaterialTheme.colorScheme.primary.copy(alpha = 0.6f),&#10;                    MaterialTheme.colorScheme.secondary.copy(alpha = 0.6f)&#10;                )&#10;            )&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.padding(vertical = 12.dp, horizontal = 14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = null,&#10;                tint = iconColor,&#10;                modifier = Modifier.size(28.dp)&#10;            )&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(2.dp)&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = value,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun WorkoutOptionCard(&#10;    workout: Workout,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Card(&#10;        onClick = onClick,&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surfaceVariant,&#10;            contentColor = MaterialTheme.colorScheme.onSurfaceVariant&#10;        ),&#10;        modifier = Modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 6.dp),&#10;        shape = RoundedCornerShape(16.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 8.dp, vertical = 12.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Center&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(44.dp)&#10;                    .background(&#10;                        color = MaterialTheme.colorScheme.background,&#10;                        shape = CircleShape&#10;                    )&#10;                    .border(&#10;                        width = 1.5.dp,&#10;                        brush = Brush.linearGradient(&#10;                            colors = listOf(&#10;                                MaterialTheme.colorScheme.primary,&#10;                                MaterialTheme.colorScheme.secondary&#10;                            )&#10;                        ),&#10;                        shape = CircleShape&#10;                    ),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = workout.name.getWorkoutIcon(),&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(6.dp))&#10;&#10;            Text(&#10;                text = workout.name,&#10;                style = MaterialTheme.typography.labelLarge,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;            Text(&#10;                text = &quot;MET ${workout.met}&quot;,&#10;                style = MaterialTheme.typography.labelSmall,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@Composable&#10;fun WorkoutHistory(&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    onDeleteLogRequested: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllRequested: () -&gt; Unit,&#10;    onLogClick: (WorkoutLog) -&gt; Unit = {}&#10;) {&#10;    // State handling: rememberLazyListState menyimpan scroll position&#10;    // State ini akan bertahan saat configuration changes (rotasi layar)&#10;    val listState = rememberLazyListState()&#10;&#10;    Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(&#10;                text = &quot;Workout Terbaru&quot;,&#10;                style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                color = MaterialTheme.colorScheme.onBackground&#10;            )&#10;&#10;            if (logs.isNotEmpty()) {&#10;                IconButton(onClick = onDeleteAllRequested) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.DeleteForever,&#10;                        contentDescription = &quot;Hapus semua aktivitas&quot;,&#10;                        tint = MaterialTheme.colorScheme.error&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        if (logs.isEmpty()) {&#10;            Text(&#10;                text = &quot;Belum ada aktivitas hari ini&quot;,&#10;                style = MaterialTheme.typography.bodyMedium,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        } else {&#10;            val sortedLogs = logs.sortedByDescending { it.timestamp }&#10;&#10;            LazyColumn(&#10;                state = listState, // State handling: menjaga scroll position saat rotasi&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(400.dp), // Tinggi maksimum untuk scroll area&#10;                verticalArrangement = Arrangement.spacedBy(10.dp)&#10;            ) {&#10;                items(sortedLogs, key = { it.timestamp }) { log -&gt;&#10;                    WorkoutLogCard(&#10;                        log = log,&#10;                        onLogClick = onLogClick,&#10;                        onDeleteLogRequested = onDeleteLogRequested&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun WorkoutLogCard(&#10;    log: WorkoutLog,&#10;    onLogClick: (WorkoutLog) -&gt; Unit,&#10;    onDeleteLogRequested: (WorkoutLog) -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable { onLogClick(log) },&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant),&#10;        shape = RoundedCornerShape(16.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            if (log.imageUri != null) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(56.dp)&#10;                        .background(&#10;                            color = MaterialTheme.colorScheme.background,&#10;                            shape = RoundedCornerShape(12.dp)&#10;                        )&#10;                        .border(&#10;                            width = 1.5.dp,&#10;                            brush = Brush.linearGradient(&#10;                                colors = listOf(&#10;                                    MaterialTheme.colorScheme.primary,&#10;                                    MaterialTheme.colorScheme.secondary&#10;                                )&#10;                            ),&#10;                            shape = RoundedCornerShape(12.dp)&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Image(&#10;                        painter = rememberAsyncImagePainter(log.imageUri),&#10;                        contentDescription = null,&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentScale = ContentScale.Fit&#10;                    )&#10;                }&#10;            } else {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .background(&#10;                            color = MaterialTheme.colorScheme.background,&#10;                            shape = CircleShape&#10;                        )&#10;                        .border(&#10;                            width = 1.5.dp,&#10;                            brush = Brush.linearGradient(&#10;                                colors = listOf(&#10;                                    MaterialTheme.colorScheme.primary,&#10;                                    MaterialTheme.colorScheme.secondary&#10;                                )&#10;                            ),&#10;                            shape = CircleShape&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = log.workout.getWorkoutIcon(),&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.primary,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f),&#10;                verticalArrangement = Arrangement.spacedBy(6.dp)&#10;            ) {&#10;                Text(&#10;                    text = log.workout,&#10;                    style = MaterialTheme.typography.titleSmall,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(6.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.AccessTime,&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.size(16.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;${formatMinutes(log.durationMinutes)}  ${log.calories.toInt()} kcal&quot;,&#10;                        style = MaterialTheme.typography.bodyMedium,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(6.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.CalendarToday,&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.size(16.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;${log.date}  ${log.time}&quot;,&#10;                        style = MaterialTheme.typography.bodySmall,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;            }&#10;&#10;            IconButton(onClick = { onDeleteLogRequested(log) }) {&#10;                Icon(&#10;                    imageVector = Icons.Default.Delete,&#10;                    contentDescription = &quot;Hapus aktivitas&quot;,&#10;                    tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;internal fun formatMinutes(minutes: Double): String {&#10;    return &quot;${&quot;%.1f&quot;.format(minutes)} menit&quot;&#10;}&#10;&#10;private fun String.getWorkoutIcon() = when (lowercase()) {&#10;    &quot;yoga&quot; -&gt; Icons.Default.SelfImprovement&#10;    &quot;running&quot; -&gt; Icons.Default.DirectionsRun&#10;    &quot;stretching&quot; -&gt; Icons.Default.AccessibilityNew&#10;    &quot;hiit&quot; -&gt; Icons.Default.Bolt&#10;    &quot;cycling&quot; -&gt; Icons.Default.DirectionsBike&#10;    &quot;walking&quot; -&gt; Icons.Default.DirectionsWalk&#10;    else -&gt; Icons.Default.FitnessCenter&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.width&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.lazy.rememberLazyListState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.DirectionsBike&#10;import androidx.compose.material.icons.automirrored.filled.DirectionsRun&#10;import androidx.compose.material.icons.automirrored.filled.DirectionsWalk&#10;import androidx.compose.material.icons.filled.AccessTime&#10;import androidx.compose.material.icons.filled.AccessibilityNew&#10;import androidx.compose.material.icons.filled.Bolt&#10;import androidx.compose.material.icons.filled.CalendarToday&#10;import androidx.compose.material.icons.filled.Delete&#10;import androidx.compose.material.icons.filled.DeleteForever&#10;import androidx.compose.material.icons.filled.FitnessCenter&#10;import androidx.compose.material.icons.filled.LocalFireDepartment&#10;import androidx.compose.material.icons.filled.SelfImprovement&#10;import androidx.compose.material.icons.filled.Whatshot&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.TransformOrigin&#10;import androidx.compose.ui.graphics.graphicsLayer&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.Dp&#10;import androidx.compose.ui.unit.dp&#10;import coil.compose.rememberAsyncImagePainter&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@Composable&#10;fun GreetingCard() {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant),&#10;        shape = RoundedCornerShape(20.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(18.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Column(verticalArrangement = Arrangement.spacedBy(6.dp)) {&#10;                Text(&#10;                    text = &quot;Halo, Atlet!&quot;,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;                Text(&#10;                    text = &quot;Tetap konsisten, targetmu sudah dekat.&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(64.dp)&#10;                    .background(MaterialTheme.colorScheme.background, CircleShape)&#10;                    .border(&#10;                        width = 2.dp,&#10;                        brush = Brush.linearGradient(&#10;                            listOf(&#10;                                MaterialTheme.colorScheme.primary,&#10;                                MaterialTheme.colorScheme.secondary&#10;                            )&#10;                        ),&#10;                        shape = CircleShape&#10;                    ),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = Icons.Default.Bolt,&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.primary&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatsCard(stats: DailyStats, progress: List&lt;DailyProgress&gt;) {&#10;    val caloriesColor = Color(0xFFFF9270)&#10;    val durationColor = Color(0xFF74B4FF)&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surfaceVariant,&#10;            contentColor = MaterialTheme.colorScheme.onSurfaceVariant&#10;        ),&#10;        shape = RoundedCornerShape(20.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 10.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(18.dp),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp)&#10;        ) {&#10;            Column(verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                Text(&#10;                    text = &quot;Progress Hari Ini&quot;,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;                Text(&#10;                    text = &quot;Pantau akumulasi 7 hari terakhir untuk kalori &amp; durasi&quot;,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            DailyProgressChart(&#10;                dailyProgress = progress,&#10;                caloriesColor = caloriesColor,&#10;                durationColor = durationColor&#10;            )&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                HighlightStat(&#10;                    title = &quot;Kalori hari ini&quot;,&#10;                    value = &quot;${stats.totalCalories.toInt()} kcal&quot;,&#10;                    icon = Icons.Default.LocalFireDepartment,&#10;                    accent = caloriesColor,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;                HighlightStat(&#10;                    title = &quot;Durasi hari ini&quot;,&#10;                    value = formatMinutes(stats.totalDurationMinutes),&#10;                    icon = Icons.Default.AccessTime,&#10;                    accent = durationColor,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;            }&#10;&#10;            StatChip(&#10;                title = &quot;Streak&quot;,&#10;                value = &quot;${stats.streak} hari&quot;,&#10;                icon = Icons.Default.Whatshot,&#10;                iconColor = Color(0xFFcccccc)&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DailyProgressChart(&#10;    dailyProgress: List&lt;DailyProgress&gt;,&#10;    caloriesColor: Color,&#10;    durationColor: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val maxValue = dailyProgress&#10;        .flatMap { listOf(it.totalCalories, it.totalDurationMinutes) }&#10;        .maxOrNull()&#10;        ?.takeIf { it &gt; 0 }&#10;        ?: 1.0&#10;    val barHeight = 170.dp&#10;    val chartHeight = barHeight + 48.dp&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .background(&#10;                color = MaterialTheme.colorScheme.background,&#10;                shape = RoundedCornerShape(14.dp)&#10;            )&#10;            .padding(14.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            LegendItem(color = caloriesColor, label = &quot;Kalori&quot;)&#10;            LegendItem(color = durationColor, label = &quot;Durasi (mnt)&quot;)&#10;        }&#10;&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(chartHeight),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.Bottom&#10;        ) {&#10;            dailyProgress.forEach { entry -&gt;&#10;                val caloriesHeight = ((entry.totalCalories / maxValue) * barHeight.value).toFloat().dp&#10;                val durationHeight = ((entry.totalDurationMinutes / maxValue) * barHeight.value).toFloat().dp&#10;&#10;                Column(&#10;                    modifier = Modifier.weight(1f),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Bottom&#10;                ) {&#10;                    Row(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(barHeight),&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                        verticalAlignment = Alignment.Bottom&#10;                    ) {&#10;                        Bar(valueHeight = caloriesHeight, color = caloriesColor)&#10;                        Bar(valueHeight = durationHeight, color = durationColor)&#10;                    }&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;                    Text(&#10;                        text = entry.dateLabel,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        fontWeight = FontWeight.Medium,&#10;                        color = MaterialTheme.colorScheme.onBackground,&#10;                        modifier = Modifier.graphicsLayer(&#10;                            rotationZ = -65f,&#10;                            transformOrigin = TransformOrigin(0.5f, 0.5f)&#10;                        )&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun Bar(valueHeight: Dp, color: Color) {&#10;    Box(&#10;        modifier = Modifier&#10;            .width(16.dp)&#10;            .height(valueHeight.coerceAtLeast(6.dp))&#10;            .background(color, RoundedCornerShape(topStart = 10.dp, topEnd = 10.dp))&#10;    )&#10;}&#10;&#10;@Composable&#10;private fun LegendItem(color: Color, label: String) {&#10;    Row(&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.spacedBy(6.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .size(14.dp)&#10;                .background(color, RoundedCornerShape(4.dp))&#10;        )&#10;        Text(&#10;            text = label,&#10;            style = MaterialTheme.typography.labelSmall,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HighlightStat(&#10;    title: String,&#10;    value: String,&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    accent: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier,&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.background),&#10;        border = BorderStroke(1.dp, accent.copy(alpha = 0.35f)),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .padding(vertical = 12.dp, horizontal = 14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(34.dp)&#10;                    .background(accent.copy(alpha = 0.14f), CircleShape),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = icon,&#10;                    contentDescription = null,&#10;                    tint = accent&#10;                )&#10;            }&#10;            Column(verticalArrangement = Arrangement.spacedBy(2.dp)) {&#10;                Text(&#10;                    text = title,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = value,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun StatChip(&#10;    title: String,&#10;    value: String,&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    iconColor: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier,&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.background),&#10;        border = BorderStroke(&#10;            width = 1.dp,&#10;            brush = Brush.linearGradient(&#10;                listOf(&#10;                    MaterialTheme.colorScheme.primary.copy(alpha = 0.6f),&#10;                    MaterialTheme.colorScheme.secondary.copy(alpha = 0.6f)&#10;                )&#10;            )&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.padding(vertical = 12.dp, horizontal = 14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = null,&#10;                tint = iconColor,&#10;                modifier = Modifier.size(28.dp)&#10;            )&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(2.dp)&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    style = MaterialTheme.typography.bodySmall,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = value,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun WorkoutOptionCard(&#10;    workout: Workout,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Card(&#10;        onClick = onClick,&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surfaceVariant,&#10;            contentColor = MaterialTheme.colorScheme.onSurfaceVariant&#10;        ),&#10;        modifier = Modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 6.dp),&#10;        shape = RoundedCornerShape(16.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 8.dp, vertical = 12.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Center&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(44.dp)&#10;                    .background(&#10;                        color = MaterialTheme.colorScheme.background,&#10;                        shape = CircleShape&#10;                    )&#10;                    .border(&#10;                        width = 1.5.dp,&#10;                        brush = Brush.linearGradient(&#10;                            colors = listOf(&#10;                                MaterialTheme.colorScheme.primary,&#10;                                MaterialTheme.colorScheme.secondary&#10;                            )&#10;                        ),&#10;                        shape = CircleShape&#10;                    ),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Icon(&#10;                    imageVector = workout.name.getWorkoutIcon(),&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(6.dp))&#10;&#10;            Text(&#10;                text = workout.name,&#10;                style = MaterialTheme.typography.labelLarge,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;            Text(&#10;                text = &quot;MET ${workout.met}&quot;,&#10;                style = MaterialTheme.typography.labelSmall,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@Composable&#10;fun WorkoutHistory(&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    onDeleteLogRequested: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllRequested: () -&gt; Unit,&#10;    onLogClick: (WorkoutLog) -&gt; Unit = {}&#10;) {&#10;    // State handling: rememberLazyListState menyimpan scroll position&#10;    // State ini akan bertahan saat configuration changes (rotasi layar)&#10;    val listState = rememberLazyListState()&#10;&#10;    Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(&#10;                text = &quot;Workout Terbaru&quot;,&#10;                style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                color = MaterialTheme.colorScheme.onBackground&#10;            )&#10;&#10;            if (logs.isNotEmpty()) {&#10;                IconButton(onClick = onDeleteAllRequested) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.DeleteForever,&#10;                        contentDescription = &quot;Hapus semua aktivitas&quot;,&#10;                        tint = MaterialTheme.colorScheme.error&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        if (logs.isEmpty()) {&#10;            Text(&#10;                text = &quot;Belum ada aktivitas hari ini&quot;,&#10;                style = MaterialTheme.typography.bodyMedium,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        } else {&#10;            val sortedLogs = logs.sortedByDescending { it.timestamp }&#10;&#10;            LazyColumn(&#10;                state = listState, // State handling: menjaga scroll position saat rotasi&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(400.dp), // Tinggi maksimum untuk scroll area&#10;                verticalArrangement = Arrangement.spacedBy(10.dp)&#10;            ) {&#10;                items(sortedLogs, key = { it.timestamp }) { log -&gt;&#10;                    WorkoutLogCard(&#10;                        log = log,&#10;                        onLogClick = onLogClick,&#10;                        onDeleteLogRequested = onDeleteLogRequested&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun WorkoutLogCard(&#10;    log: WorkoutLog,&#10;    onLogClick: (WorkoutLog) -&gt; Unit,&#10;    onDeleteLogRequested: (WorkoutLog) -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable { onLogClick(log) },&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant),&#10;        shape = RoundedCornerShape(16.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(14.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            if (log.imageUri != null) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(56.dp)&#10;                        .background(&#10;                            color = MaterialTheme.colorScheme.background,&#10;                            shape = RoundedCornerShape(12.dp)&#10;                        )&#10;                        .border(&#10;                            width = 1.5.dp,&#10;                            brush = Brush.linearGradient(&#10;                                colors = listOf(&#10;                                    MaterialTheme.colorScheme.primary,&#10;                                    MaterialTheme.colorScheme.secondary&#10;                                )&#10;                            ),&#10;                            shape = RoundedCornerShape(12.dp)&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Image(&#10;                        painter = rememberAsyncImagePainter(log.imageUri),&#10;                        contentDescription = null,&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentScale = ContentScale.Fit&#10;                    )&#10;                }&#10;            } else {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .background(&#10;                            color = MaterialTheme.colorScheme.background,&#10;                            shape = CircleShape&#10;                        )&#10;                        .border(&#10;                            width = 1.5.dp,&#10;                            brush = Brush.linearGradient(&#10;                                colors = listOf(&#10;                                    MaterialTheme.colorScheme.primary,&#10;                                    MaterialTheme.colorScheme.secondary&#10;                                )&#10;                            ),&#10;                            shape = CircleShape&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = log.workout.getWorkoutIcon(),&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.primary,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f),&#10;                verticalArrangement = Arrangement.spacedBy(6.dp)&#10;            ) {&#10;                Text(&#10;                    text = log.workout,&#10;                    style = MaterialTheme.typography.titleSmall,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(6.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.AccessTime,&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.size(16.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;${formatMinutes(log.durationMinutes)}  ${log.calories.toInt()} kcal&quot;,&#10;                        style = MaterialTheme.typography.bodyMedium,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(6.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.CalendarToday,&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.size(16.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;${log.date}  ${log.time}&quot;,&#10;                        style = MaterialTheme.typography.bodySmall,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;            }&#10;&#10;            IconButton(onClick = { onDeleteLogRequested(log) }) {&#10;                Icon(&#10;                    imageVector = Icons.Default.Delete,&#10;                    contentDescription = &quot;Hapus aktivitas&quot;,&#10;                    tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;internal fun formatMinutes(minutes: Double): String {&#10;    return &quot;${&quot;%.1f&quot;.format(minutes)} menit&quot;&#10;}&#10;&#10;private fun String.getWorkoutIcon() = when (lowercase()) {&#10;    &quot;yoga&quot; -&gt; Icons.Default.SelfImprovement&#10;    &quot;running&quot; -&gt; Icons.AutoMirrored.Filled.DirectionsRun&#10;    &quot;stretching&quot; -&gt; Icons.Default.AccessibilityNew&#10;    &quot;hiit&quot; -&gt; Icons.Default.Bolt&#10;    &quot;cycling&quot; -&gt; Icons.AutoMirrored.Filled.DirectionsBike&#10;    &quot;walking&quot; -&gt; Icons.AutoMirrored.Filled.DirectionsWalk&#10;    else -&gt; Icons.Default.FitnessCenter&#10;}&#10;&#10;@OptIn(androidx.compose.material3.ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ApiClientSelectorCard(&#10;    currentApiClient: com.example.pamproject.data.ApiClientType,&#10;    onApiClientChange: (com.example.pamproject.data.ApiClientType) -&gt; Unit,&#10;    isLoading: Boolean,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val expandedState = androidx.compose.runtime.remember { androidx.compose.runtime.mutableStateOf(false) }&#10;    val apiClients = com.example.pamproject.data.ApiClientType.entries&#10;&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surfaceVariant),&#10;        shape = RoundedCornerShape(16.dp),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 6.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            Row(&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;            ) {&#10;                Icon(&#10;                    imageVector = Icons.Default.Bolt,&#10;                    contentDescription = null,&#10;                    tint = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.size(20.dp)&#10;                )&#10;                Text(&#10;                    text = &quot;REST API Client&quot;,&#10;                    style = MaterialTheme.typography.titleSmall,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Pilih library untuk komunikasi client-server&quot;,&#10;                style = MaterialTheme.typography.bodySmall,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;&#10;            androidx.compose.material3.ExposedDropdownMenuBox(&#10;                expanded = expandedState.value,&#10;                onExpandedChange = { if (!isLoading) expandedState.value = !expandedState.value }&#10;            ) {&#10;                androidx.compose.material3.OutlinedTextField(&#10;                    value = when (currentApiClient) {&#10;                        com.example.pamproject.data.ApiClientType.RETROFIT -&gt; &quot;Retrofit + GSON&quot;&#10;                        com.example.pamproject.data.ApiClientType.HTTP_URL_CONNECTION -&gt; &quot;HttpURLConnection&quot;&#10;                        com.example.pamproject.data.ApiClientType.VOLLEY -&gt; &quot;Volley&quot;&#10;                    },&#10;                    onValueChange = {},&#10;                    readOnly = true,&#10;                    enabled = !isLoading,&#10;                    trailingIcon = {&#10;                        androidx.compose.material3.ExposedDropdownMenuDefaults.TrailingIcon(expanded = expandedState.value)&#10;                    },&#10;                    modifier = Modifier&#10;                        .menuAnchor(androidx.compose.material3.MenuAnchorType.PrimaryNotEditable)&#10;                        .fillMaxWidth(),&#10;                    colors = androidx.compose.material3.ExposedDropdownMenuDefaults.outlinedTextFieldColors()&#10;                )&#10;&#10;                androidx.compose.material3.DropdownMenu(&#10;                    expanded = expandedState.value,&#10;                    onDismissRequest = { expandedState.value = false }&#10;                ) {&#10;                    apiClients.forEach { client -&gt;&#10;                        androidx.compose.material3.DropdownMenuItem(&#10;                            text = {&#10;                                Column {&#10;                                    Text(&#10;                                        text = when (client) {&#10;                                            com.example.pamproject.data.ApiClientType.RETROFIT -&gt; &quot;Retrofit + GSON&quot;&#10;                                            com.example.pamproject.data.ApiClientType.HTTP_URL_CONNECTION -&gt; &quot;HttpURLConnection&quot;&#10;                                            com.example.pamproject.data.ApiClientType.VOLLEY -&gt; &quot;Volley&quot;&#10;                                        },&#10;                                        fontWeight = FontWeight.Medium&#10;                                    )&#10;                                    Text(&#10;                                        text = when (client) {&#10;                                            com.example.pamproject.data.ApiClientType.RETROFIT -&gt; &quot;Type-safe HTTP client with annotations&quot;&#10;                                            com.example.pamproject.data.ApiClientType.HTTP_URL_CONNECTION -&gt; &quot;Native Java HTTP library&quot;&#10;                                            com.example.pamproject.data.ApiClientType.VOLLEY -&gt; &quot;Android HTTP library by Google&quot;&#10;                                        },&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                    )&#10;                                }&#10;                            },&#10;                            onClick = {&#10;                                onApiClientChange(client)&#10;                                expandedState.value = false&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardScreen.kt" />
              <option name="originalContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TopAppBar&#10;import androidx.compose.material3.TopAppBarDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import kotlinx.coroutines.launch&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun DashboardScreen(&#10;    stats: DailyStats,&#10;    progress: List&lt;DailyProgress&gt;,&#10;    workouts: List&lt;Workout&gt;,&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    onWorkoutClick: (Int) -&gt; Unit,&#10;    onDeleteLog: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllLogs: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var logToDelete by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    var showDeleteAllDialog by remember { mutableStateOf(false) }&#10;    var selectedLog by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    Box(modifier = modifier.fillMaxSize()) {&#10;        Scaffold(&#10;            snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;            topBar = {&#10;                TopAppBar(&#10;                    title = {&#10;                        Column {&#10;                            Text(&#10;                                text = &quot;Workit&quot;,&#10;                                style = MaterialTheme.typography.titleLarge,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                            Text(&#10;                                text = &quot;Stay consistent, stay strong&quot;,&#10;                                style = MaterialTheme.typography.bodySmall,&#10;                                color = Color.White.copy(alpha = 0.8f)&#10;                            )&#10;                        }&#10;                    },&#10;                    colors = TopAppBarDefaults.topAppBarColors(&#10;                        containerColor = MaterialTheme.colorScheme.background,&#10;                        titleContentColor = Color.White&#10;                    )&#10;                )&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(innerPadding)&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(20.dp),&#10;                verticalArrangement = Arrangement.spacedBy(18.dp)&#10;            ) {&#10;                GreetingCard()&#10;&#10;                StatsCard(&#10;                    stats = stats,&#10;                    progress = progress&#10;                )&#10;&#10;                Text(&#10;                    text = &quot;Pilih Workout&quot;,&#10;                    style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;&#10;                LazyVerticalGrid(&#10;                    columns = GridCells.Fixed(3),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(((workouts.size / 3 + if (workouts.size % 3 != 0) 1 else 0) * 140).dp),&#10;                    verticalArrangement = Arrangement.spacedBy(10.dp),&#10;                    horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;                    userScrollEnabled = false&#10;                ) {&#10;                    items(workouts, key = { it.id }) { workout -&gt;&#10;                        WorkoutOptionCard(&#10;                            workout = workout,&#10;                            onClick = { onWorkoutClick(workout.id) }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                WorkoutHistory(&#10;                    logs = logs,&#10;                    onDeleteLogRequested = { log -&gt;&#10;                        selectedLog = null&#10;                        showDeleteAllDialog = false&#10;                        logToDelete = log&#10;                    },&#10;                    onDeleteAllRequested = {&#10;                        selectedLog = null&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = true&#10;                    },&#10;                    onLogClick = { log -&gt;&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = false&#10;                        selectedLog = log&#10;                        scope.launch {&#10;                            snackbarHostState.showSnackbar(&#10;                                message = &quot;${log.workout}  ${formatMinutes(log.durationMinutes)}  ${log.calories.toInt()} kcal  ${log.date} ${log.time}&quot;&#10;                            )&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;&#10;        DashboardDialogs(&#10;            logToDelete = logToDelete,&#10;            onDismissDeleteLog = { logToDelete = null },&#10;            onDeleteLog = {&#10;                logToDelete?.let { onDeleteLog(it) }&#10;                logToDelete = null&#10;            },&#10;            showDeleteAllDialog = showDeleteAllDialog,&#10;            onDismissDeleteAll = { showDeleteAllDialog = false },&#10;            onDeleteAll = {&#10;                onDeleteAllLogs()&#10;                showDeleteAllDialog = false&#10;            },&#10;            selectedLog = selectedLog,&#10;            onDismissSelectedLog = { selectedLog = null }&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.width&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Refresh&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.DropdownMenuItem&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.ExposedDropdownMenuBox&#10;import androidx.compose.material3.ExposedDropdownMenuDefaults&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.MenuAnchorType&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TopAppBar&#10;import androidx.compose.material3.TopAppBarDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import kotlinx.coroutines.launch&#10;import com.example.pamproject.data.ApiClientType&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun DashboardScreen(&#10;    stats: DailyStats,&#10;    progress: List&lt;DailyProgress&gt;,&#10;    workouts: List&lt;Workout&gt;,&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    isLoading: Boolean = false,&#10;    currentApiClient: ApiClientType = ApiClientType.RETROFIT,&#10;    onApiClientChange: (ApiClientType) -&gt; Unit = {},&#10;    onRefresh: () -&gt; Unit = {},&#10;    onWorkoutClick: (Int) -&gt; Unit,&#10;    onDeleteLog: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllLogs: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var logToDelete by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    var showDeleteAllDialog by remember { mutableStateOf(false) }&#10;    var selectedLog by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    Box(modifier = modifier.fillMaxSize()) {&#10;        Scaffold(&#10;            snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;            topBar = {&#10;                TopAppBar(&#10;                    title = {&#10;                        Row(&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            Column {&#10;                                Text(&#10;                                    text = &quot;Workit&quot;,&#10;                                    style = MaterialTheme.typography.titleLarge,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = Color.White&#10;                                )&#10;                                Text(&#10;                                    text = &quot;Stay consistent, stay strong&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall,&#10;                                    color = Color.White.copy(alpha = 0.8f)&#10;                                )&#10;                            }&#10;                            if (isLoading) {&#10;                                Spacer(modifier = Modifier.width(12.dp))&#10;                                CircularProgressIndicator(&#10;                                    modifier = Modifier.size(20.dp),&#10;                                    color = Color.White,&#10;                                    strokeWidth = 2.dp&#10;                                )&#10;                            }&#10;                        }&#10;                    },&#10;                    actions = {&#10;                        IconButton(&#10;                            onClick = onRefresh,&#10;                            enabled = !isLoading&#10;                        ) {&#10;                            Icon(&#10;                                imageVector = Icons.Default.Refresh,&#10;                                contentDescription = &quot;Refresh&quot;,&#10;                                tint = Color.White&#10;                            )&#10;                        }&#10;                    },&#10;                    colors = TopAppBarDefaults.topAppBarColors(&#10;                        containerColor = MaterialTheme.colorScheme.background,&#10;                        titleContentColor = Color.White&#10;                    )&#10;                )&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(innerPadding)&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(20.dp),&#10;                verticalArrangement = Arrangement.spacedBy(18.dp)&#10;            ) {&#10;                GreetingCard()&#10;&#10;                // API Client Selector Card&#10;                ApiClientSelectorCard(&#10;                    currentApiClient = currentApiClient,&#10;                    onApiClientChange = onApiClientChange,&#10;                    isLoading = isLoading&#10;                )&#10;&#10;                StatsCard(&#10;                    stats = stats,&#10;                    progress = progress&#10;                )&#10;&#10;                Text(&#10;                    text = &quot;Pilih Workout&quot;,&#10;                    style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;&#10;                LazyVerticalGrid(&#10;                    columns = GridCells.Fixed(3),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(((workouts.size / 3 + if (workouts.size % 3 != 0) 1 else 0) * 140).dp),&#10;                    verticalArrangement = Arrangement.spacedBy(10.dp),&#10;                    horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;                    userScrollEnabled = false&#10;                ) {&#10;                    items(workouts, key = { it.id }) { workout -&gt;&#10;                        WorkoutOptionCard(&#10;                            workout = workout,&#10;                            onClick = { onWorkoutClick(workout.id) }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                WorkoutHistory(&#10;                    logs = logs,&#10;                    onDeleteLogRequested = { log -&gt;&#10;                        selectedLog = null&#10;                        showDeleteAllDialog = false&#10;                        logToDelete = log&#10;                    },&#10;                    onDeleteAllRequested = {&#10;                        selectedLog = null&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = true&#10;                    },&#10;                    onLogClick = { log -&gt;&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = false&#10;                        selectedLog = log&#10;                        scope.launch {&#10;                            snackbarHostState.showSnackbar(&#10;                                message = &quot;${log.workout}  ${formatMinutes(log.durationMinutes)}  ${log.calories.toInt()} kcal  ${log.date} ${log.time}&quot;&#10;                            )&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;&#10;        DashboardDialogs(&#10;            logToDelete = logToDelete,&#10;            onDismissDeleteLog = { logToDelete = null },&#10;            onDeleteLog = {&#10;                logToDelete?.let { onDeleteLog(it) }&#10;                logToDelete = null&#10;            },&#10;            showDeleteAllDialog = showDeleteAllDialog,&#10;            onDismissDeleteAll = { showDeleteAllDialog = false },&#10;            onDeleteAll = {&#10;                onDeleteAllLogs()&#10;                showDeleteAllDialog = false&#10;            },&#10;            selectedLog = selectedLog,&#10;            onDismissSelectedLog = { selectedLog = null }&#10;        )&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/viewmodel/WorkoutViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/viewmodel/WorkoutViewModel.kt" />
              <option name="originalContent" value="package com.example.pamproject.viewmodel&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.ViewModelProvider&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.pamproject.data.WorkoutRepository&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutData&#10;import com.example.pamproject.model.WorkoutLog&#10;import kotlinx.coroutines.Job&#10;import kotlinx.coroutines.delay&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.map&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.launch&#10;import java.time.LocalDate&#10;import java.time.LocalTime&#10;import java.time.format.DateTimeFormatter&#10;&#10;class WorkoutViewModel(private val repository: WorkoutRepository) : ViewModel() {&#10;&#10;    val workouts: List&lt;Workout&gt; = WorkoutData.workouts&#10;&#10;    private val _logs = MutableStateFlow(repository.loadLogs())&#10;    val logs: StateFlow&lt;List&lt;WorkoutLog&gt;&gt; = _logs.asStateFlow()&#10;&#10;    val todayStats: StateFlow&lt;DailyStats&gt; = _logs&#10;        .map { repository.calculateTodayStats(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.calculateTodayStats(_logs.value)&#10;        )&#10;&#10;    val weeklyProgress: StateFlow&lt;List&lt;DailyProgress&gt;&gt; = _logs&#10;        .map { repository.getRecentProgress(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.getRecentProgress(_logs.value)&#10;        )&#10;&#10;    private val _timerState = MutableStateFlow(TimerState())&#10;    val timerState: StateFlow&lt;TimerState&gt; = _timerState.asStateFlow()&#10;&#10;    private var timerJob: Job? = null&#10;&#10;    fun startSession(workoutId: Int) {&#10;        val selectedWorkout = workouts.find { it.id == workoutId }&#10;        _timerState.value = TimerState(selectedWorkout = selectedWorkout)&#10;        timerJob?.cancel()&#10;    }&#10;&#10;    fun cancelSession() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    fun startTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun pauseTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = _timerState.value.copy(isRunning = false, isPaused = true)&#10;    }&#10;&#10;    fun resumeTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun finishWorkout(imageUri: String? = null): WorkoutLog? {&#10;        val workout = _timerState.value.selectedWorkout ?: return null&#10;        val elapsedSeconds = _timerState.value.elapsedSeconds&#10;        if (elapsedSeconds &lt;= 0) {&#10;            resetTimer()&#10;            return null&#10;        }&#10;&#10;        val durationMinutes = elapsedSeconds / 60.0&#10;        val calories = calculateCalories(workout.met, durationMinutes)&#10;        val currentTime = LocalTime.now().format(DateTimeFormatter.ofPattern(&quot;HH:mm&quot;))&#10;        val log = WorkoutLog(&#10;            date = LocalDate.now().toString(),&#10;            time = currentTime,&#10;            workout = workout.name,&#10;            durationMinutes = durationMinutes,&#10;            calories = calories,&#10;            timestamp = System.currentTimeMillis(),&#10;            imageUri = imageUri&#10;        )&#10;        val updatedLogs = repository.addLog(log)&#10;        _logs.value = updatedLogs&#10;        resetTimer()&#10;        return log&#10;    }&#10;&#10;    fun deleteLog(log: WorkoutLog) {&#10;        val updatedLogs = repository.deleteLog(log)&#10;        _logs.value = updatedLogs&#10;    }&#10;&#10;    fun clearLogs() {&#10;        val updatedLogs = repository.clearLogs()&#10;        _logs.value = updatedLogs&#10;    }&#10;&#10;    fun getWorkoutById(id: Int): Workout? = workouts.find { it.id == id }&#10;&#10;    private fun calculateCalories(met: Double, durationMinutes: Double): Double {&#10;        val defaultWeightKg = 70.0&#10;        return met * 3.5 * defaultWeightKg / 200.0 * durationMinutes&#10;    }&#10;&#10;    private fun startTicker() {&#10;        timerJob?.cancel()&#10;        timerJob = viewModelScope.launch {&#10;            while (true) {&#10;                delay(1_000)&#10;                _timerState.value = _timerState.value.copy(&#10;                    elapsedSeconds = _timerState.value.elapsedSeconds + 1&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun resetTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    data class TimerState(&#10;        val selectedWorkout: Workout? = null,&#10;        val elapsedSeconds: Int = 0,&#10;        val isRunning: Boolean = false,&#10;        val isPaused: Boolean = false&#10;    )&#10;&#10;    companion object {&#10;        fun provideFactory(repository: WorkoutRepository): ViewModelProvider.Factory =&#10;            object : ViewModelProvider.Factory {&#10;                @Suppress(&quot;UNCHECKED_CAST&quot;)&#10;                override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {&#10;                    return WorkoutViewModel(repository) as T&#10;                }&#10;            }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.viewmodel&#10;&#10;import android.util.Log&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.ViewModelProvider&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.pamproject.data.ApiClientType&#10;import com.example.pamproject.data.WorkoutRepository&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutData&#10;import com.example.pamproject.model.WorkoutLog&#10;import kotlinx.coroutines.Job&#10;import kotlinx.coroutines.delay&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.map&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.launch&#10;import java.time.LocalDate&#10;import java.time.LocalTime&#10;import java.time.format.DateTimeFormatter&#10;&#10;class WorkoutViewModel(private val repository: WorkoutRepository) : ViewModel() {&#10;&#10;    companion object {&#10;        private const val TAG = &quot;WorkoutViewModel&quot;&#10;&#10;        fun provideFactory(repository: WorkoutRepository): ViewModelProvider.Factory =&#10;            object : ViewModelProvider.Factory {&#10;                @Suppress(&quot;UNCHECKED_CAST&quot;)&#10;                override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {&#10;                    return WorkoutViewModel(repository) as T&#10;                }&#10;            }&#10;    }&#10;&#10;    val workouts: List&lt;Workout&gt; = WorkoutData.workouts&#10;&#10;    private val _logs = MutableStateFlow(repository.loadLogs())&#10;    val logs: StateFlow&lt;List&lt;WorkoutLog&gt;&gt; = _logs.asStateFlow()&#10;&#10;    private val _isLoading = MutableStateFlow(false)&#10;    val isLoading: StateFlow&lt;Boolean&gt; = _isLoading.asStateFlow()&#10;&#10;    private val _currentApiClient = MutableStateFlow(repository.currentApiClient)&#10;    val currentApiClient: StateFlow&lt;ApiClientType&gt; = _currentApiClient.asStateFlow()&#10;&#10;    val todayStats: StateFlow&lt;DailyStats&gt; = _logs&#10;        .map { repository.calculateTodayStats(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.calculateTodayStats(_logs.value)&#10;        )&#10;&#10;    val weeklyProgress: StateFlow&lt;List&lt;DailyProgress&gt;&gt; = _logs&#10;        .map { repository.getRecentProgress(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.getRecentProgress(_logs.value)&#10;        )&#10;&#10;    private val _timerState = MutableStateFlow(TimerState())&#10;    val timerState: StateFlow&lt;TimerState&gt; = _timerState.asStateFlow()&#10;&#10;    private var timerJob: Job? = null&#10;&#10;    init {&#10;        // Load logs from API on initialization using a background thread&#10;        loadLogsFromApi()&#10;    }&#10;&#10;    /**&#10;     * Switch between different API clients (Retrofit, HttpUrlConnection, Volley)&#10;     */&#10;    fun switchApiClient(clientType: ApiClientType) {&#10;        repository.currentApiClient = clientType&#10;        _currentApiClient.value = clientType&#10;        Log.d(TAG, &quot;Switched to API client: $clientType&quot;)&#10;        // Reload data with new client&#10;        loadLogsFromApi()&#10;    }&#10;&#10;    /**&#10;     * Load workout logs from Supabase API&#10;     * Uses coroutine to run on background thread&#10;     */&#10;    fun loadLogsFromApi() {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            Log.d(TAG, &quot;Loading logs from API using: ${repository.currentApiClient}&quot;)&#10;            try {&#10;                val logs = repository.loadLogsFromApi()&#10;                _logs.value = logs&#10;                Log.d(TAG, &quot;Successfully loaded ${logs.size} logs from API&quot;)&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Error loading logs: ${e.message}&quot;)&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    fun startSession(workoutId: Int) {&#10;        val selectedWorkout = workouts.find { it.id == workoutId }&#10;        _timerState.value = TimerState(selectedWorkout = selectedWorkout)&#10;        timerJob?.cancel()&#10;    }&#10;&#10;    fun cancelSession() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    fun startTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun pauseTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = _timerState.value.copy(isRunning = false, isPaused = true)&#10;    }&#10;&#10;    fun resumeTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun finishWorkout(imageUri: String? = null): WorkoutLog? {&#10;        val workout = _timerState.value.selectedWorkout ?: return null&#10;        val elapsedSeconds = _timerState.value.elapsedSeconds&#10;        if (elapsedSeconds &lt;= 0) {&#10;            resetTimer()&#10;            return null&#10;        }&#10;&#10;        val durationMinutes = elapsedSeconds / 60.0&#10;        val calories = calculateCalories(workout.met, durationMinutes)&#10;        val currentTime = LocalTime.now().format(DateTimeFormatter.ofPattern(&quot;HH:mm&quot;))&#10;        val log = WorkoutLog(&#10;            date = LocalDate.now().toString(),&#10;            time = currentTime,&#10;            workout = workout.name,&#10;            durationMinutes = durationMinutes,&#10;            calories = calories,&#10;            timestamp = System.currentTimeMillis(),&#10;            imageUri = imageUri&#10;        )&#10;&#10;        // Add log to API using background thread&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            Log.d(TAG, &quot;Adding workout log to API using: ${repository.currentApiClient}&quot;)&#10;            try {&#10;                val updatedLogs = repository.addLogToApi(log)&#10;                _logs.value = updatedLogs&#10;                Log.d(TAG, &quot;Successfully added log to API&quot;)&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Error adding log: ${e.message}&quot;)&#10;                // Fallback to local storage&#10;                val updatedLogs = repository.addLog(log)&#10;                _logs.value = updatedLogs&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;&#10;        resetTimer()&#10;        return log&#10;    }&#10;&#10;    fun deleteLog(log: WorkoutLog) {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            Log.d(TAG, &quot;Deleting workout log from API using: ${repository.currentApiClient}&quot;)&#10;            try {&#10;                val updatedLogs = repository.deleteLogFromApi(log)&#10;                _logs.value = updatedLogs&#10;                Log.d(TAG, &quot;Successfully deleted log from API&quot;)&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Error deleting log: ${e.message}&quot;)&#10;                val updatedLogs = repository.deleteLog(log)&#10;                _logs.value = updatedLogs&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    fun clearLogs() {&#10;        viewModelScope.launch {&#10;            _isLoading.value = true&#10;            Log.d(TAG, &quot;Clearing all logs from API using: ${repository.currentApiClient}&quot;)&#10;            try {&#10;                val updatedLogs = repository.clearLogsFromApi()&#10;                _logs.value = updatedLogs&#10;                Log.d(TAG, &quot;Successfully cleared all logs from API&quot;)&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Error clearing logs: ${e.message}&quot;)&#10;                val updatedLogs = repository.clearLogs()&#10;                _logs.value = updatedLogs&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    fun getWorkoutById(id: Int): Workout? = workouts.find { it.id == id }&#10;&#10;    private fun calculateCalories(met: Double, durationMinutes: Double): Double {&#10;        val defaultWeightKg = 70.0&#10;        return met * 3.5 * defaultWeightKg / 200.0 * durationMinutes&#10;    }&#10;&#10;    private fun startTicker() {&#10;        timerJob?.cancel()&#10;        timerJob = viewModelScope.launch {&#10;            while (true) {&#10;                delay(1_000)&#10;                _timerState.value = _timerState.value.copy(&#10;                    elapsedSeconds = _timerState.value.elapsedSeconds + 1&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun resetTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    data class TimerState(&#10;        val selectedWorkout: Workout? = null,&#10;        val elapsedSeconds: Int = 0,&#10;        val isRunning: Boolean = false,&#10;        val isPaused: Boolean = false&#10;    )&#10;}&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>