<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/build.gradle.kts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/build.gradle.kts" />
              <option name="originalContent" value="plugins {&#10;    alias(libs.plugins.android.application)&#10;    alias(libs.plugins.kotlin.android)&#10;    alias(libs.plugins.kotlin.compose)&#10;}&#10;&#10;android {&#10;    namespace = &quot;com.example.pamproject&quot;&#10;    compileSdk = 35&#10;&#10;    defaultConfig {&#10;        applicationId = &quot;com.example.pamproject&quot;&#10;        minSdk = 24&#10;        targetSdk = 35&#10;        versionCode = 1&#10;        versionName = &quot;1.0&quot;&#10;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#10;    }&#10;&#10;    buildTypes {&#10;        release {&#10;            isMinifyEnabled = false&#10;            proguardFiles(&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#10;                &quot;proguard-rules.pro&quot;&#10;            )&#10;        }&#10;    }&#10;    compileOptions {&#10;        sourceCompatibility = JavaVersion.VERSION_11&#10;        targetCompatibility = JavaVersion.VERSION_11&#10;        isCoreLibraryDesugaringEnabled = true&#10;    }&#10;    kotlinOptions {&#10;        jvmTarget = &quot;11&quot;&#10;    }&#10;    buildFeatures {&#10;        compose = true&#10;    }&#10;}&#10;&#10;dependencies {&#10;&#10;    implementation(libs.androidx.core.ktx)&#10;    implementation(libs.androidx.foundation)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.navigation.compose)&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;    implementation(&quot;io.coil-kt:coil-compose:2.7.0&quot;)&#10;    implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)&#10;    implementation(&quot;com.squareup.retrofit2:retrofit:2.11.0&quot;)&#10;    implementation(&quot;com.squareup.retrofit2:converter-gson:2.11.0&quot;)&#10;    implementation(&quot;com.squareup.okhttp3:logging-interceptor:4.12.0&quot;)&#10;    implementation(&quot;com.android.volley:volley:1.2.1&quot;)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0&quot;)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-runtime-compose:2.7.0&quot;)&#10;}" />
              <option name="updatedContent" value="plugins {&#10;    alias(libs.plugins.android.application)&#10;    alias(libs.plugins.kotlin.android)&#10;    alias(libs.plugins.kotlin.compose)&#10;}&#10;&#10;android {&#10;    namespace = &quot;com.example.pamproject&quot;&#10;    compileSdk = 35&#10;&#10;    defaultConfig {&#10;        applicationId = &quot;com.example.pamproject&quot;&#10;        minSdk = 24&#10;        targetSdk = 35&#10;        versionCode = 1&#10;        versionName = &quot;1.0&quot;&#10;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#10;    }&#10;&#10;    buildTypes {&#10;        release {&#10;            isMinifyEnabled = false&#10;            proguardFiles(&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#10;                &quot;proguard-rules.pro&quot;&#10;            )&#10;        }&#10;    }&#10;    compileOptions {&#10;        sourceCompatibility = JavaVersion.VERSION_11&#10;        targetCompatibility = JavaVersion.VERSION_11&#10;        isCoreLibraryDesugaringEnabled = true&#10;    }&#10;    kotlinOptions {&#10;        jvmTarget = &quot;11&quot;&#10;    }&#10;    buildFeatures {&#10;        compose = true&#10;    }&#10;}&#10;&#10;dependencies {&#10;&#10;    implementation(libs.androidx.core.ktx)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    implementation(libs.androidx.foundation)&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.navigation.compose)&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;    implementation(&quot;io.coil-kt:coil-compose:2.7.0&quot;)&#10;    implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)&#10;    implementation(&quot;com.squareup.retrofit2:retrofit:2.11.0&quot;)&#10;    implementation(&quot;com.squareup.retrofit2:converter-gson:2.11.0&quot;)&#10;    implementation(&quot;com.squareup.okhttp3:logging-interceptor:4.12.0&quot;)&#10;    implementation(&quot;com.android.volley:volley:1.2.1&quot;)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.8.7&quot;)&#10;    implementation(&quot;androidx.lifecycle:lifecycle-runtime-compose:2.8.7&quot;)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/ui/screen/DashboardScreen.kt" />
              <option name="originalContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TopAppBar&#10;import androidx.compose.material3.TopAppBarDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import kotlinx.coroutines.launch&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun DashboardScreen(&#10;    stats: DailyStats,&#10;    progress: List&lt;DailyProgress&gt;,&#10;    workouts: List&lt;Workout&gt;,&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    onWorkoutClick: (Int) -&gt; Unit,&#10;    onDeleteLog: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllLogs: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var logToDelete by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    var showDeleteAllDialog by remember { mutableStateOf(false) }&#10;    var selectedLog by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    Box(modifier = modifier.fillMaxSize()) {&#10;        Scaffold(&#10;            snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;            topBar = {&#10;                TopAppBar(&#10;                    title = {&#10;                        Column {&#10;                            Text(&#10;                                text = &quot;Workit&quot;,&#10;                                style = MaterialTheme.typography.titleLarge,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                            Text(&#10;                                text = &quot;Stay consistent, stay strong&quot;,&#10;                                style = MaterialTheme.typography.bodySmall,&#10;                                color = Color.White.copy(alpha = 0.8f)&#10;                            )&#10;                        }&#10;                    },&#10;                    colors = TopAppBarDefaults.topAppBarColors(&#10;                        containerColor = MaterialTheme.colorScheme.background,&#10;                        titleContentColor = Color.White&#10;                    )&#10;                )&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(innerPadding)&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(20.dp),&#10;                verticalArrangement = Arrangement.spacedBy(18.dp)&#10;            ) {&#10;                GreetingCard()&#10;&#10;                StatsCard(&#10;                    stats = stats,&#10;                    progress = progress&#10;                )&#10;&#10;                Text(&#10;                    text = &quot;Pilih Workout&quot;,&#10;                    style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;&#10;                LazyVerticalGrid(&#10;                    columns = GridCells.Fixed(3),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(((workouts.size / 3 + if (workouts.size % 3 != 0) 1 else 0) * 140).dp),&#10;                    verticalArrangement = Arrangement.spacedBy(10.dp),&#10;                    horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;                    userScrollEnabled = false&#10;                ) {&#10;                    items(workouts, key = { it.id }) { workout -&gt;&#10;                        WorkoutOptionCard(&#10;                            workout = workout,&#10;                            onClick = { onWorkoutClick(workout.id) }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                WorkoutHistory(&#10;                    logs = logs,&#10;                    onDeleteLogRequested = { log -&gt;&#10;                        selectedLog = null&#10;                        showDeleteAllDialog = false&#10;                        logToDelete = log&#10;                    },&#10;                    onDeleteAllRequested = {&#10;                        selectedLog = null&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = true&#10;                    },&#10;                    onLogClick = { log -&gt;&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = false&#10;                        selectedLog = log&#10;                        scope.launch {&#10;                            snackbarHostState.showSnackbar(&#10;                                message = &quot;${log.workout} • ${formatMinutes(log.durationMinutes)} • ${log.calories.toInt()} kcal • ${log.date} ${log.time}&quot;&#10;                            )&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;&#10;        DashboardDialogs(&#10;            logToDelete = logToDelete,&#10;            onDismissDeleteLog = { logToDelete = null },&#10;            onDeleteLog = {&#10;                logToDelete?.let { onDeleteLog(it) }&#10;                logToDelete = null&#10;            },&#10;            showDeleteAllDialog = showDeleteAllDialog,&#10;            onDismissDeleteAll = { showDeleteAllDialog = false },&#10;            onDeleteAll = {&#10;                onDeleteAllLogs()&#10;                showDeleteAllDialog = false&#10;            },&#10;            selectedLog = selectedLog,&#10;            onDismissSelectedLog = { selectedLog = null }&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.ui.screen&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Refresh&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TopAppBar&#10;import androidx.compose.material3.TopAppBarDefaults&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import kotlinx.coroutines.launch&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutLog&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun DashboardScreen(&#10;    stats: DailyStats,&#10;    progress: List&lt;DailyProgress&gt;,&#10;    workouts: List&lt;Workout&gt;,&#10;    logs: List&lt;WorkoutLog&gt;,&#10;    onWorkoutClick: (Int) -&gt; Unit,&#10;    onDeleteLog: (WorkoutLog) -&gt; Unit,&#10;    onDeleteAllLogs: () -&gt; Unit,&#10;    onRefresh: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var logToDelete by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    var showDeleteAllDialog by remember { mutableStateOf(false) }&#10;    var selectedLog by remember { mutableStateOf&lt;WorkoutLog?&gt;(null) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    Box(modifier = modifier.fillMaxSize()) {&#10;        Scaffold(&#10;            snackbarHost = { SnackbarHost(hostState = snackbarHostState) },&#10;            topBar = {&#10;                TopAppBar(&#10;                    title = {&#10;                        Column {&#10;                            Text(&#10;                                text = &quot;Workit&quot;,&#10;                                style = MaterialTheme.typography.titleLarge,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                            Text(&#10;                                text = &quot;Stay consistent, stay strong&quot;,&#10;                                style = MaterialTheme.typography.bodySmall,&#10;                                color = Color.White.copy(alpha = 0.8f)&#10;                            )&#10;                        }&#10;                    },&#10;                    actions = {&#10;                        IconButton(onClick = onRefresh) {&#10;                            Icon(&#10;                                imageVector = Icons.Default.Refresh,&#10;                                contentDescription = &quot;Refresh data&quot;,&#10;                                tint = Color.White&#10;                            )&#10;                        }&#10;                    },&#10;                    colors = TopAppBarDefaults.topAppBarColors(&#10;                        containerColor = MaterialTheme.colorScheme.background,&#10;                        titleContentColor = Color.White&#10;                    )&#10;                )&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(innerPadding)&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(20.dp),&#10;                verticalArrangement = Arrangement.spacedBy(18.dp)&#10;            ) {&#10;                GreetingCard()&#10;&#10;                StatsCard(&#10;                    stats = stats,&#10;                    progress = progress&#10;                )&#10;&#10;                Text(&#10;                    text = &quot;Pilih Workout&quot;,&#10;                    style = MaterialTheme.typography.titleMedium.copy(fontWeight = FontWeight.Bold),&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;&#10;                LazyVerticalGrid(&#10;                    columns = GridCells.Fixed(3),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(((workouts.size / 3 + if (workouts.size % 3 != 0) 1 else 0) * 140).dp),&#10;                    verticalArrangement = Arrangement.spacedBy(10.dp),&#10;                    horizontalArrangement = Arrangement.spacedBy(10.dp),&#10;                    userScrollEnabled = false&#10;                ) {&#10;                    items(workouts, key = { it.id }) { workout -&gt;&#10;                        WorkoutOptionCard(&#10;                            workout = workout,&#10;                            onClick = { onWorkoutClick(workout.id) }&#10;                        )&#10;                    }&#10;                }&#10;&#10;                WorkoutHistory(&#10;                    logs = logs,&#10;                    onDeleteLogRequested = { log -&gt;&#10;                        selectedLog = null&#10;                        showDeleteAllDialog = false&#10;                        logToDelete = log&#10;                    },&#10;                    onDeleteAllRequested = {&#10;                        selectedLog = null&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = true&#10;                    },&#10;                    onLogClick = { log -&gt;&#10;                        logToDelete = null&#10;                        showDeleteAllDialog = false&#10;                        selectedLog = log&#10;                        scope.launch {&#10;                            snackbarHostState.showSnackbar(&#10;                                message = &quot;${log.workout} • ${formatMinutes(log.durationMinutes)} • ${log.calories.toInt()} kcal • ${log.date} ${log.time}&quot;&#10;                            )&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;&#10;        DashboardDialogs(&#10;            logToDelete = logToDelete,&#10;            onDismissDeleteLog = { logToDelete = null },&#10;            onDeleteLog = {&#10;                logToDelete?.let { onDeleteLog(it) }&#10;                logToDelete = null&#10;            },&#10;            showDeleteAllDialog = showDeleteAllDialog,&#10;            onDismissDeleteAll = { showDeleteAllDialog = false },&#10;            onDeleteAll = {&#10;                onDeleteAllLogs()&#10;                showDeleteAllDialog = false&#10;            },&#10;            selectedLog = selectedLog,&#10;            onDismissSelectedLog = { selectedLog = null }&#10;        )&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/viewmodel/WorkoutViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/pamproject/viewmodel/WorkoutViewModel.kt" />
              <option name="originalContent" value="package com.example.pamproject.viewmodel&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.ViewModelProvider&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.pamproject.data.WorkoutRepository&#10;import com.example.pamproject.model.DailyProgress&#10;import com.example.pamproject.model.DailyStats&#10;import com.example.pamproject.model.Workout&#10;import com.example.pamproject.model.WorkoutData&#10;import com.example.pamproject.model.WorkoutLog&#10;import kotlinx.coroutines.Job&#10;import kotlinx.coroutines.delay&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.map&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.launch&#10;import java.time.LocalDate&#10;import java.time.LocalTime&#10;import java.time.format.DateTimeFormatter&#10;&#10;class WorkoutViewModel(private val repository: WorkoutRepository) : ViewModel() {&#10;&#10;    val workouts: List&lt;Workout&gt; = WorkoutData.workouts&#10;&#10;    private val _logs = MutableStateFlow(repository.loadLogs())&#10;    val logs: StateFlow&lt;List&lt;WorkoutLog&gt;&gt; = _logs.asStateFlow()&#10;&#10;    init {&#10;        refreshFromServer()&#10;    }&#10;&#10;    val todayStats: StateFlow&lt;DailyStats&gt; = _logs&#10;        .map { repository.calculateTodayStats(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.calculateTodayStats(_logs.value)&#10;        )&#10;&#10;    val weeklyProgress: StateFlow&lt;List&lt;DailyProgress&gt;&gt; = _logs&#10;        .map { repository.getRecentProgress(it) }&#10;        .stateIn(&#10;            scope = viewModelScope,&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#10;            initialValue = repository.getRecentProgress(_logs.value)&#10;        )&#10;&#10;    private val _timerState = MutableStateFlow(TimerState())&#10;    val timerState: StateFlow&lt;TimerState&gt; = _timerState.asStateFlow()&#10;&#10;    private var timerJob: Job? = null&#10;&#10;    fun startSession(workoutId: Int) {&#10;        val selectedWorkout = workouts.find { it.id == workoutId }&#10;        _timerState.value = TimerState(selectedWorkout = selectedWorkout)&#10;        timerJob?.cancel()&#10;    }&#10;&#10;    fun cancelSession() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    fun startTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun pauseTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = _timerState.value.copy(isRunning = false, isPaused = true)&#10;    }&#10;&#10;    fun resumeTimer() {&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#10;        startTicker()&#10;    }&#10;&#10;    fun finishWorkout(imageUri: String? = null): WorkoutLog? {&#10;        val workout = _timerState.value.selectedWorkout ?: return null&#10;        val elapsedSeconds = _timerState.value.elapsedSeconds&#10;        if (elapsedSeconds &lt;= 0) {&#10;            resetTimer()&#10;            return null&#10;        }&#10;&#10;        val durationMinutes = elapsedSeconds / 60.0&#10;        val calories = calculateCalories(workout.met, durationMinutes)&#10;        val currentTime = LocalTime.now().format(DateTimeFormatter.ofPattern(&quot;HH:mm&quot;))&#10;        val log = WorkoutLog(&#10;            date = LocalDate.now().toString(),&#10;            time = currentTime,&#10;            workout = workout.name,&#10;            durationMinutes = durationMinutes,&#10;            calories = calories,&#10;            timestamp = System.currentTimeMillis(),&#10;            imageUri = imageUri&#10;        )&#10;        val updatedLogs = repository.addLog(log)&#10;        _logs.value = updatedLogs&#10;        viewModelScope.launch {&#10;            repository.uploadLogWithRetrofit(log)&#10;            repository.uploadLogWithVolley(log)&#10;        }&#10;        resetTimer()&#10;        return log&#10;    }&#10;&#10;    fun deleteLog(log: WorkoutLog) {&#10;        val updatedLogs = repository.deleteLog(log)&#10;        _logs.value = updatedLogs&#10;    }&#10;&#10;    fun clearLogs() {&#10;        val updatedLogs = repository.clearLogs()&#10;        _logs.value = updatedLogs&#10;    }&#10;&#10;    fun getWorkoutById(id: Int): Workout? = workouts.find { it.id == id }&#10;&#10;    private fun refreshFromServer() {&#10;        viewModelScope.launch {&#10;            val remoteLogs = repository.fetchLogsWithRetrofit()&#10;            if (remoteLogs.isNotEmpty()) {&#10;                repository.saveLogs(remoteLogs)&#10;                _logs.value = remoteLogs&#10;            }&#10;&#10;            repository.fetchLogsWithHttpUrlConnection(&#10;                onSuccess = { logsFromHttp -&gt;&#10;                    viewModelScope.launch {&#10;                        repository.saveLogs(logsFromHttp)&#10;                        _logs.value = logsFromHttp&#10;                    }&#10;                },&#10;                onError = { /* Ignored for demo usage */ }&#10;            )&#10;&#10;            repository.fetchLogsWithVolley(&#10;                onSuccess = { volleyLogs -&gt;&#10;                    _logs.value = volleyLogs&#10;                    repository.saveLogs(volleyLogs)&#10;                },&#10;                onError = { /* Ignored for demo usage */ }&#10;            )&#10;        }&#10;    }&#10;&#10;    private fun calculateCalories(met: Double, durationMinutes: Double): Double {&#10;        val defaultWeightKg = 70.0&#10;        return met * 3.5 * defaultWeightKg / 200.0 * durationMinutes&#10;    }&#10;&#10;    private fun startTicker() {&#10;        timerJob?.cancel()&#10;        timerJob = viewModelScope.launch {&#10;            while (true) {&#10;                delay(1_000)&#10;                _timerState.value = _timerState.value.copy(&#10;                    elapsedSeconds = _timerState.value.elapsedSeconds + 1&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun resetTimer() {&#10;        timerJob?.cancel()&#10;        _timerState.value = TimerState()&#10;    }&#10;&#10;    data class TimerState(&#10;        val selectedWorkout: Workout? = null,&#10;        val elapsedSeconds: Int = 0,&#10;        val isRunning: Boolean = false,&#10;        val isPaused: Boolean = false&#10;    )&#10;&#10;    companion object {&#10;        fun provideFactory(repository: WorkoutRepository): ViewModelProvider.Factory =&#10;            object : ViewModelProvider.Factory {&#10;                @Suppress(&quot;UNCHECKED_CAST&quot;)&#10;                override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {&#10;                    return WorkoutViewModel(repository) as T&#10;                }&#10;            }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.pamproject.viewmodel&#13;&#10;&#13;&#10;import androidx.lifecycle.ViewModel&#13;&#10;import androidx.lifecycle.ViewModelProvider&#13;&#10;import androidx.lifecycle.viewModelScope&#13;&#10;import com.example.pamproject.data.WorkoutRepository&#13;&#10;import com.example.pamproject.model.DailyProgress&#13;&#10;import com.example.pamproject.model.DailyStats&#13;&#10;import com.example.pamproject.model.Workout&#13;&#10;import com.example.pamproject.model.WorkoutData&#13;&#10;import com.example.pamproject.model.WorkoutLog&#13;&#10;import kotlinx.coroutines.Job&#13;&#10;import kotlinx.coroutines.delay&#13;&#10;import kotlinx.coroutines.flow.MutableStateFlow&#13;&#10;import kotlinx.coroutines.flow.StateFlow&#13;&#10;import kotlinx.coroutines.flow.asStateFlow&#13;&#10;import kotlinx.coroutines.flow.map&#13;&#10;import kotlinx.coroutines.flow.stateIn&#13;&#10;import kotlinx.coroutines.launch&#13;&#10;import java.time.LocalDate&#13;&#10;import java.time.LocalTime&#13;&#10;import java.time.format.DateTimeFormatter&#13;&#10;&#13;&#10;class WorkoutViewModel(private val repository: WorkoutRepository) : ViewModel() {&#13;&#10;&#13;&#10;    val workouts: List&lt;Workout&gt; = WorkoutData.workouts&#13;&#10;&#13;&#10;    private val _logs = MutableStateFlow(repository.loadLogs())&#13;&#10;    val logs: StateFlow&lt;List&lt;WorkoutLog&gt;&gt; = _logs.asStateFlow()&#13;&#10;&#13;&#10;    init {&#13;&#10;        refreshFromServer()&#13;&#10;    }&#13;&#10;&#13;&#10;    val todayStats: StateFlow&lt;DailyStats&gt; = _logs&#13;&#10;        .map { repository.calculateTodayStats(it) }&#13;&#10;        .stateIn(&#13;&#10;            scope = viewModelScope,&#13;&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#13;&#10;            initialValue = repository.calculateTodayStats(_logs.value)&#13;&#10;        )&#13;&#10;&#13;&#10;    val weeklyProgress: StateFlow&lt;List&lt;DailyProgress&gt;&gt; = _logs&#13;&#10;        .map { repository.getRecentProgress(it) }&#13;&#10;        .stateIn(&#13;&#10;            scope = viewModelScope,&#13;&#10;            started = kotlinx.coroutines.flow.SharingStarted.WhileSubscribed(5_000),&#13;&#10;            initialValue = repository.getRecentProgress(_logs.value)&#13;&#10;        )&#13;&#10;&#13;&#10;    private val _timerState = MutableStateFlow(TimerState())&#13;&#10;    val timerState: StateFlow&lt;TimerState&gt; = _timerState.asStateFlow()&#13;&#10;&#13;&#10;    private var timerJob: Job? = null&#13;&#10;&#13;&#10;    fun startSession(workoutId: Int) {&#13;&#10;        val selectedWorkout = workouts.find { it.id == workoutId }&#13;&#10;        _timerState.value = TimerState(selectedWorkout = selectedWorkout)&#13;&#10;        timerJob?.cancel()&#13;&#10;    }&#13;&#10;&#13;&#10;    fun cancelSession() {&#13;&#10;        timerJob?.cancel()&#13;&#10;        _timerState.value = TimerState()&#13;&#10;    }&#13;&#10;&#13;&#10;    fun startTimer() {&#13;&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#13;&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#13;&#10;        startTicker()&#13;&#10;    }&#13;&#10;&#13;&#10;    fun pauseTimer() {&#13;&#10;        timerJob?.cancel()&#13;&#10;        _timerState.value = _timerState.value.copy(isRunning = false, isPaused = true)&#13;&#10;    }&#13;&#10;&#13;&#10;    fun resumeTimer() {&#13;&#10;        if (_timerState.value.selectedWorkout == null || _timerState.value.isRunning) return&#13;&#10;        _timerState.value = _timerState.value.copy(isRunning = true, isPaused = false)&#13;&#10;        startTicker()&#13;&#10;    }&#13;&#10;&#13;&#10;    fun finishWorkout(imageUri: String? = null): WorkoutLog? {&#13;&#10;        val workout = _timerState.value.selectedWorkout ?: return null&#13;&#10;        val elapsedSeconds = _timerState.value.elapsedSeconds&#13;&#10;        if (elapsedSeconds &lt;= 0) {&#13;&#10;            resetTimer()&#13;&#10;            return null&#13;&#10;        }&#13;&#10;&#13;&#10;        val durationMinutes = elapsedSeconds / 60.0&#13;&#10;        val calories = calculateCalories(workout.met, durationMinutes)&#13;&#10;        val currentTime = LocalTime.now().format(DateTimeFormatter.ofPattern(&quot;HH:mm&quot;))&#13;&#10;        val log = WorkoutLog(&#13;&#10;            date = LocalDate.now().toString(),&#13;&#10;            time = currentTime,&#13;&#10;            workout = workout.name,&#13;&#10;            durationMinutes = durationMinutes,&#13;&#10;            calories = calories,&#13;&#10;            timestamp = System.currentTimeMillis(),&#13;&#10;            imageUri = imageUri&#13;&#10;        )&#13;&#10;        val updatedLogs = repository.addLog(log)&#13;&#10;        _logs.value = updatedLogs&#13;&#10;        viewModelScope.launch {&#13;&#10;            repository.uploadLogWithRetrofit(log)&#13;&#10;            repository.uploadLogWithVolley(log)&#13;&#10;        }&#13;&#10;        resetTimer()&#13;&#10;        return log&#13;&#10;    }&#13;&#10;&#13;&#10;    fun deleteLog(log: WorkoutLog) {&#13;&#10;        val updatedLogs = repository.deleteLog(log)&#13;&#10;        _logs.value = updatedLogs&#13;&#10;    }&#13;&#10;&#13;&#10;    fun clearLogs() {&#13;&#10;        val updatedLogs = repository.clearLogs()&#13;&#10;        _logs.value = updatedLogs&#13;&#10;    }&#13;&#10;&#13;&#10;    fun getWorkoutById(id: Int): Workout? = workouts.find { it.id == id }&#10;&#10;    fun refreshFromServer() {&#13;&#10;        viewModelScope.launch {&#13;&#10;            val remoteLogs = repository.fetchLogsWithRetrofit()&#13;&#10;            if (remoteLogs.isNotEmpty()) {&#13;&#10;                repository.saveLogs(remoteLogs)&#13;&#10;                _logs.value = remoteLogs&#13;&#10;            }&#13;&#10;&#13;&#10;            repository.fetchLogsWithHttpUrlConnection(&#13;&#10;                onSuccess = { logsFromHttp -&gt;&#13;&#10;                    viewModelScope.launch {&#13;&#10;                        repository.saveLogs(logsFromHttp)&#13;&#10;                        _logs.value = logsFromHttp&#13;&#10;                    }&#13;&#10;                },&#13;&#10;                onError = { /* Ignored for demo usage */ }&#13;&#10;            )&#13;&#10;&#13;&#10;            repository.fetchLogsWithVolley(&#13;&#10;                onSuccess = { volleyLogs -&gt;&#13;&#10;                    _logs.value = volleyLogs&#13;&#10;                    repository.saveLogs(volleyLogs)&#13;&#10;                },&#13;&#10;                onError = { /* Ignored for demo usage */ }&#13;&#10;            )&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    private fun calculateCalories(met: Double, durationMinutes: Double): Double {&#13;&#10;        val defaultWeightKg = 70.0&#13;&#10;        return met * 3.5 * defaultWeightKg / 200.0 * durationMinutes&#13;&#10;    }&#13;&#10;&#13;&#10;    private fun startTicker() {&#13;&#10;        timerJob?.cancel()&#13;&#10;        timerJob = viewModelScope.launch {&#13;&#10;            while (true) {&#13;&#10;                delay(1_000)&#13;&#10;                _timerState.value = _timerState.value.copy(&#13;&#10;                    elapsedSeconds = _timerState.value.elapsedSeconds + 1&#13;&#10;                )&#13;&#10;            }&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    private fun resetTimer() {&#13;&#10;        timerJob?.cancel()&#13;&#10;        _timerState.value = TimerState()&#13;&#10;    }&#13;&#10;&#13;&#10;    data class TimerState(&#13;&#10;        val selectedWorkout: Workout? = null,&#13;&#10;        val elapsedSeconds: Int = 0,&#13;&#10;        val isRunning: Boolean = false,&#13;&#10;        val isPaused: Boolean = false&#13;&#10;    )&#13;&#10;&#13;&#10;    companion object {&#13;&#10;        fun provideFactory(repository: WorkoutRepository): ViewModelProvider.Factory =&#13;&#10;            object : ViewModelProvider.Factory {&#13;&#10;                @Suppress(&quot;UNCHECKED_CAST&quot;)&#13;&#10;                override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {&#13;&#10;                    return WorkoutViewModel(repository) as T&#13;&#10;                }&#13;&#10;            }&#13;&#10;    }&#13;&#10;}&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gradle/libs.versions.toml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gradle/libs.versions.toml" />
              <option name="originalContent" value="[versions]&#10;agp = &quot;8.7.2&quot;&#10;kotlin = &quot;2.0.21&quot;&#10;coreKtx = &quot;1.15.0&quot;&#10;junit = &quot;4.13.2&quot;&#10;junitVersion = &quot;1.2.1&quot;&#10;espressoCore = &quot;3.6.1&quot;&#10;lifecycleRuntimeKtx = &quot;2.8.7&quot;&#10;activityCompose = &quot;1.9.3&quot;&#10;composeBom = &quot;2024.11.00&quot;&#10;navigationCompose = &quot;2.8.4&quot;&#10;foundation = &quot;1.7.5&quot;&#10;&#10;[libraries]&#10;androidx-core-ktx = { group = &quot;androidx.core&quot;, name = &quot;core-ktx&quot;, version.ref = &quot;coreKtx&quot; }&#10;junit = { group = &quot;junit&quot;, name = &quot;junit&quot;, version.ref = &quot;junit&quot; }&#10;androidx-junit = { group = &quot;androidx.test.ext&quot;, name = &quot;junit&quot;, version.ref = &quot;junitVersion&quot; }&#10;androidx-espresso-core = { group = &quot;androidx.test.espresso&quot;, name = &quot;espresso-core&quot;, version.ref = &quot;espressoCore&quot; }&#10;androidx-lifecycle-runtime-ktx = { group = &quot;androidx.lifecycle&quot;, name = &quot;lifecycle-runtime-ktx&quot;, version.ref = &quot;lifecycleRuntimeKtx&quot; }&#10;androidx-activity-compose = { group = &quot;androidx.activity&quot;, name = &quot;activity-compose&quot;, version.ref = &quot;activityCompose&quot; }&#10;androidx-compose-bom = { group = &quot;androidx.compose&quot;, name = &quot;compose-bom&quot;, version.ref = &quot;composeBom&quot; }&#10;androidx-ui = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui&quot; }&#10;androidx-ui-graphics = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-graphics&quot; }&#10;androidx-ui-tooling = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling&quot; }&#10;androidx-ui-tooling-preview = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling-preview&quot; }&#10;androidx-ui-test-manifest = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-manifest&quot; }&#10;androidx-ui-test-junit4 = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-junit4&quot; }&#10;androidx-material3 = { group = &quot;androidx.compose.material3&quot;, name = &quot;material3&quot; }&#10;androidx-navigation-compose = { group = &quot;androidx.navigation&quot;, name = &quot;navigation-compose&quot;, version.ref = &quot;navigationCompose&quot; }&#10;androidx-foundation = { group = &quot;androidx.compose.foundation&quot;, name = &quot;foundation&quot;, version.ref = &quot;foundation&quot; }&#10;&#10;[plugins]&#10;android-application = { id = &quot;com.android.application&quot;, version.ref = &quot;agp&quot; }&#10;kotlin-android = { id = &quot;org.jetbrains.kotlin.android&quot;, version.ref = &quot;kotlin&quot; }&#10;kotlin-compose = { id = &quot;org.jetbrains.kotlin.plugin.compose&quot;, version.ref = &quot;kotlin&quot; }&#10;&#10;" />
              <option name="updatedContent" value="[versions]&#10;agp = &quot;8.7.2&quot;&#10;kotlin = &quot;2.0.21&quot;&#10;coreKtx = &quot;1.15.0&quot;&#10;junit = &quot;4.13.2&quot;&#10;junitVersion = &quot;1.2.1&quot;&#10;espressoCore = &quot;3.6.1&quot;&#10;lifecycleRuntimeKtx = &quot;2.8.7&quot;&#10;activityCompose = &quot;1.9.3&quot;&#10;composeBom = &quot;2024.11.00&quot;&#10;navigationCompose = &quot;2.8.4&quot;&#10;&#10;[libraries]&#10;androidx-core-ktx = { group = &quot;androidx.core&quot;, name = &quot;core-ktx&quot;, version.ref = &quot;coreKtx&quot; }&#10;junit = { group = &quot;junit&quot;, name = &quot;junit&quot;, version.ref = &quot;junit&quot; }&#10;androidx-junit = { group = &quot;androidx.test.ext&quot;, name = &quot;junit&quot;, version.ref = &quot;junitVersion&quot; }&#10;androidx-espresso-core = { group = &quot;androidx.test.espresso&quot;, name = &quot;espresso-core&quot;, version.ref = &quot;espressoCore&quot; }&#10;androidx-lifecycle-runtime-ktx = { group = &quot;androidx.lifecycle&quot;, name = &quot;lifecycle-runtime-ktx&quot;, version.ref = &quot;lifecycleRuntimeKtx&quot; }&#10;androidx-activity-compose = { group = &quot;androidx.activity&quot;, name = &quot;activity-compose&quot;, version.ref = &quot;activityCompose&quot; }&#10;androidx-compose-bom = { group = &quot;androidx.compose&quot;, name = &quot;compose-bom&quot;, version.ref = &quot;composeBom&quot; }&#10;androidx-ui = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui&quot; }&#10;androidx-ui-graphics = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-graphics&quot; }&#10;androidx-ui-tooling = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling&quot; }&#10;androidx-ui-tooling-preview = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-tooling-preview&quot; }&#10;androidx-ui-test-manifest = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-manifest&quot; }&#10;androidx-ui-test-junit4 = { group = &quot;androidx.compose.ui&quot;, name = &quot;ui-test-junit4&quot; }&#10;androidx-material3 = { group = &quot;androidx.compose.material3&quot;, name = &quot;material3&quot; }&#10;androidx-navigation-compose = { group = &quot;androidx.navigation&quot;, name = &quot;navigation-compose&quot;, version.ref = &quot;navigationCompose&quot; }&#10;androidx-foundation = { group = &quot;androidx.compose.foundation&quot;, name = &quot;foundation&quot; }&#10;&#10;[plugins]&#10;android-application = { id = &quot;com.android.application&quot;, version.ref = &quot;agp&quot; }&#10;kotlin-android = { id = &quot;org.jetbrains.kotlin.android&quot;, version.ref = &quot;kotlin&quot; }&#10;kotlin-compose = { id = &quot;org.jetbrains.kotlin.plugin.compose&quot;, version.ref = &quot;kotlin&quot; }&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>